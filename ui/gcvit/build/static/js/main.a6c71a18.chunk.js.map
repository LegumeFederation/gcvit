{"version":3,"sources":["Components/DefaultConfiguration.js","Components/GenotypeSelect.js","Components/ReferenceForm.js","Components/CompareForm.js","Components/TrackOptionsSelect.js","Components/HeatConfig.js","Components/HistConfig.js","Components/HaploConfig.js","Components/BaseOptionsSelect.js","Components/OptionsForm.js","Components/HelpTopics/About.js","Components/HelpTopics/ReferenceGenotype.js","Components/HelpTopics/ComparisonGenotype.js","Components/HelpTopics/GeneralOptions.js","Components/HelpTopics/DisplayNone.js","Components/HelpTopics/DisplayHaplotype.js","Components/HelpTopics/DisplayHistogram.js","Components/HelpTopics/DisplayHeat.js","Components/HelpModal.js","Components/DownloadModal.js","Components/DisplayButton.js","App.js","index.js"],"names":["rulerDisplayDefault","rulerDisplayOptions","rulerIntervalDefault","binSizeDefault","titleDefault","colorDefault","imageTitleDefault","Date","toDateString","popover","position","zIndex","cover","top","right","bottom","left","GenotypeSelector","state","selectedDataset","selectedGenotype","displayColorPicker","color","datasetChange","_this","setState","props","setDataset","append","dataset","genotype","appendDataset","idx","gtChange","colorClick","colorClose","formatDatasetValue","colorSet","hex","this","selected","_this2","_this$state","gtOpt","genotypes","react_default","a","createElement","className","onClick","style","background","react_color_lib","onChange","react_select_browser_esm","defaultValue","label","classNamePrefix","value","isClearable","isDisabled","filterOption","createFilter","ignoreAccents","options","datasets","components","Option","CustomOption","length","undefined","removeOption","React","Component","_this$props","innerProps","otherProps","isFocused","Object","objectWithoutProperties","otherInnerProps","onMouseMove","onMouseOver","newProps","objectSpread","chunk_762c4cd6_browser_esm","assign","children","ReferenceForm","GenotypeSelect_GenotypeSelector","CompareForm","count","rm","filter","opt","key","concat","addOption","prevProps","prevState","snapshot","displayFormats","comparisonFormats","heatFormat","heatColorFormat","TrackOptions","displayAs","compare","filters","heat","heatColor","viewConfig","maxValue","minValue","setConfiguration","format","side","forEach","gt","feature","glyph","display","draw_as","invert_value","min","max","width","offset","bin_size","bin_min","bin_max","by_class","class_filter","map","class_offset","class_heat","draw_label","max_distance","border","value_base","generate_bins","count_classes","transparent","transparent_percent","heatConfig","enable_pileup","border_width","histConfig","class_space","haploConfig","optionsUpdate","toLowerCase","displayChange","compareChange","filterChange","heatColorChange","heatChange","maxChange","parseInt","target","hapMax","minChange","_this$state2","filterFormats","isMulti","name","type","id","placeholder","onInput","e","BaseOptions","rulerDisplay","binSize","rulerInterval","title","rulerChange","values","titleChange","binChange","intervalChange","OptionsForm","group","general","tick_interval","display_ruler","setOptions","BaseOptionsSelect_BaseOptions","TrackOptionsSelect_TrackOptions","About","height","src","frameBorder","allow","allowFullScreen","ReferenceGenotype","hideInfo","maxHeight","ComparisonGenotype","GeneralOptions","DisplayNone","DisplayHaplotype","DisplayHistogram","DisplayHeat","HelpModal","About_About","ReferenceGenotype_ReferenceGenotype","ComparisonGenotype_ComparisonGenotype","GeneralOptions_GeneralOptions","DisplayNone_DisplayNone","DisplayHistogram_DisplayHistogram","DisplayHeat_DisplayHeat","DisplayHaplotype_DisplayHaplotype","closeAction","DataModal","quality","gffOptions","chromosome","diff","same","total","onClickImage","_callee","url","regenerator_default","wrap","_context","prev","next","document","getElementById","classList","toggle","resolveSVGBlob","t0","sent","resolvePngBlob","saveImage","stop","Promise","resolve","setTimeout","paper","window","cvit","model","encodeURIComponent","project","exportSVG","asString","view","element","toBlob","blob","URL","createObjectURL","link","download","href","body","appendChild","click","onClickData","gff","data","gffOpts","loadIndicator","hasOwnProperty","dataGroup","features","line","seqName","source","start","end","score","strand","frame","attributes","attribute","win","open","write","evt","onSelect","onChecked","checked","DisplayButton","priorRequest","request","interval","response","onSubmit","headers","requestString","classes","query","i","Error","_viewConfig","hide","visibility","hideOptions","_viewData","console","log","appendData","method","then","_viewLayout","chrOrder","_setChrOrder","refMax","vd","keys","chr","maxScore","setView","catch","error","_combineObjects","_redraw","setDirty","_inform","App","referenceDataset","showModal","auth","process","REACT_APP_USE_AUTH","user","pwd","authHeader","Headers","loadDatasets","header","arguments","fetch","json","slice","val","result","JSON","parse","stringify","handleCloseModal","handleOpenModal","userChange","passwordChange","checkAuthState","authString","btoa","status","alert","logout","gts","lib_default","isOpen","onRequestClose","shouldCloseOnOverlayClick","DownloadModal_DataModal","HelpModal_HelpModal","overflow","has","ReferenceForm_ReferenceForm","CompareForm_CompareForm","OptionsForm_OptionsForm","DisplayButton_DisplayButton","ReactDOM","render","App_App"],"mappings":"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","file":"static/js/main.a6c71a18.chunk.js","sourcesContent":["/**\r\n * Default values for UI components.\r\n */\r\n\r\n\r\n/**\r\n * Side of drawing to display the ruler\r\n */\r\nexport function rulerDisplayDefault(rulerDisplayOptions) { return rulerDisplayOptions[0]}; //0-LHS,1-RHS,2-Both,3-None\r\n\r\n\r\n/**\r\n * Distance in default units between major tick ines in ruler\r\n */\r\nexport const rulerIntervalDefault = 5000000;\r\n\r\n/**\r\n * Size of display \"bin\" for counts\r\n */\r\nexport const binSizeDefault = 500000;\r\n\r\n/**\r\n * Default title\r\n */\r\nexport const titleDefault  = \"\";\r\n\r\n/**\r\n * Default feature color\r\n */\r\nexport const colorDefault = '#19741A';\r\n\r\n/**\r\n * Default title for exported image\r\n */\r\nexport const imageTitleDefault = \"GCViT\" + new Date().toDateString();\r\n","/**\r\n * Selector dropdown for a new genotype option\r\n */\r\n\r\nimport React  from 'react';\r\nimport Select, {createFilter, components} from 'react-select';\r\nimport {SketchPicker} from 'react-color';\r\nimport {colorDefault} from './DefaultConfiguration';\r\n\r\n// placement of color select popup\r\nconst popover = {\r\n\tposition: 'absolute',\r\n\tzIndex: '2'\r\n};\r\n\r\nconst cover = {\r\n\tposition: 'fixed',\r\n\ttop: '0px',\r\n\tright: '0px',\r\n\tbottom: '0px',\r\n\tleft: '0px',\r\n};\r\n\r\nexport default class GenotypeSelector extends React.Component {\r\n\r\n\tstate = {\r\n\t\tselectedDataset: null,\r\n\t\tselectedGenotype: null,\r\n\t\tdisplayColorPicker: false,\r\n\t\tcolor: colorDefault\r\n\t};\r\n\r\n\t/**\r\n\t * Set up genotype value from form options\r\n\t */\r\n\tformatDatasetValue(){\r\n\t\treturn {\r\n\t\t\tdataset: this.state.selectedDataset || null,\r\n\t\t\tgenotype: this.state.selectedGenotype || null,\r\n\t\t\tcolor: this.state.color || null\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Change dataset source if enabled\r\n\t */\r\n\tdatasetChange = (selectedDataset) => {\r\n\t\tthis.setState({ selectedDataset, selectedGenotype: null });\r\n\t\tthis.props.setDataset(selectedDataset);\r\n\t\tlet append = { dataset: selectedDataset, genotype:null, color: this.state.color||null};\r\n\t\tthis.props.appendDataset(this.props.idx, append)\r\n\t};\r\n\r\n\t/**\r\n\t * Change genotype if enabled\r\n\t */\r\n\tgtChange = (selectedGenotype) => {\r\n\t\tthis.setState({ selectedGenotype });\r\n\t\tlet append = { dataset: this.state.selectedDataset, genotype: selectedGenotype, color: this.state.color||null};\r\n\t\tthis.props.appendDataset(this.props.idx, append);\r\n\t};\r\n\r\n\t/**\r\n\t * Display color picker\r\n\t */\r\n\tcolorClick = () => {\r\n\t\tthis.setState({displayColorPicker : true})\r\n\t};\r\n\r\n\t/**\r\n\t * hide color picker\r\n\t */\r\n\tcolorClose = () => {\r\n\t\tthis.setState({displayColorPicker : false});\r\n\t\tthis.props.appendDataset(this.props.idx, this.formatDatasetValue())\r\n\t};\r\n\r\n\t/**\r\n\t * set chosen color\r\n\t */\r\n\tcolorSet = (color) => {\r\n\t\tthis.setState({color: color.hex})\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Set dataset if component is for a variant\r\n\t */\r\n\tcomponentDidMount() {\r\n\t\tif(this.props.selected){\r\n\t\t\tthis.setState({'selectedDataset':this.props.selected})\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { selectedDataset, selectedGenotype } = this.state;\r\n\t\tconst { idx } = this.props;\r\n\t\tconst gtOpt = this.props.genotypes !== null ? this.props.genotypes : [];\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t<div className={'pure-g genotype-select'}>\r\n\t\t\t\t<div className={'pure-u-1-12 l-box '}>\r\n\t\t\t\t\t<span> Color </span><br/>\r\n\t\t\t\t\t<div className={'fake-button git-option'} onClick={this.colorClick} style={{background:this.state.color, zIndex:1 }} />\r\n\t\t\t\t\t{ this.state.displayColorPicker\r\n\t\t\t\t\t\t?<div>\r\n\t\t\t\t\t\t\t<div style={ cover } onClick={this.colorClose} />\r\n\t\t\t\t\t\t\t<div style={ popover }>\r\n\t\t\t\t\t\t\t\t<SketchPicker color={ this.state.color } onChange={ this.colorSet } />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={'pure-u-5-12 l-box'}>\r\n\t\t\t\t\t<span> Dataset </span><br/>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tdefaultValue={this.props.selected || null}\r\n\t\t\t\t\t\tlabel=\"Dataset\"\r\n\t\t\t\t\t\tclassName=\"basic-single git-option\"\r\n\t\t\t\t\t\tclassNamePrefix=\"select\"\r\n\t\t\t\t\t\tvalue={selectedDataset}\r\n\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\tisDisabled={this.props.selected}\r\n\t\t\t\t\t\tonChange={this.datasetChange}\r\n\t\t\t\t\t\tfilterOption={createFilter({ignoreAccents: false})}\r\n\t\t\t\t\t\toptions={this.props.datasets}\r\n\t\t\t\t\t\tcomponents={{Option: CustomOption}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={'pure-u-1-3 l-box'}>\r\n\t\t\t\t\t<span> Genotype </span><br/>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tclassName=\"basic-single git-option\"\r\n\t\t\t\t\t\tclassNamePrefix=\"select\"\r\n\t\t\t\t\t\tvalue={selectedGenotype}\r\n\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\tisDisabled={gtOpt.length === 0}\r\n\t\t\t\t\t\tonChange={this.gtChange}\r\n\t\t\t\t\t\tfilterOption={createFilter({ignoreAccents: false})}\r\n\t\t\t\t\t\toptions={gtOpt}\r\n\t\t\t\t\t\tcomponents={{Option: CustomOption}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.props.removeOption !== undefined\r\n\t\t\t\t\t? <div className={'pure-u-1-12 l-box'}>\r\n\t\t\t\t\t\t<span>Remove</span>\r\n\t\t\t\t\t\t<div className={'fake-button git-option'} onClick={()=> this.props.removeOption(idx)} > X </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/**\r\n * custom rendering options for react-select (select dropdown) component\r\n */\r\nclass CustomOption extends React.Component {\r\n\trender() {\r\n\t\tconst {innerProps, isFocused, ...otherProps} = this.props;\r\n\t\tconst {onMouseMove, onMouseOver, ...otherInnerProps} = innerProps;\r\n\t\tconst newProps = {innerProps: {...otherInnerProps}, ...otherProps};\r\n\t\treturn (\r\n\t\t\t<components.Option {...newProps} className=\"git-option-component\">{this.props.children}\r\n\t\t\t</components.Option>\r\n\t\t);\r\n\t}\r\n}\r\n","/**\r\n * Select reference genotype\r\n */\r\nimport React from 'react';\r\nimport GenotypeSelector from './GenotypeSelect';\r\n\r\nexport default class ReferenceForm extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<fieldset className={'genotype-field'}>\r\n\t\t\t\t<legend> Reference Genotype</legend>\r\n\t\t\t\t<GenotypeSelector\r\n\t\t\t\t\tdatasets={this.props.datasets}\r\n\t\t\t\t\tsetDataset={this.props.setDataset}\r\n\t\t\t\t\tappendDataset={this.props.appendDataset}\r\n\t\t\t\t\tgenotypes={this.props.genotypes}\r\n\t\t\t\t\tidx={0}\r\n\t\t\t\t/>\r\n\t\t\t</fieldset>\r\n\t\t);\r\n\t}\r\n}\r\n","/**\r\n * React component for rendering the comparison genotype selection menu\r\n */\r\n\r\nimport React from 'react';\r\nimport GenotypeSelector from './GenotypeSelect'; //Generic gt select component\r\n\r\nexport default class CompareForm extends React.Component {\r\n\r\n\tstate = {\r\n\t\toptions: [], // currently selected comparisons\r\n\t\tcount: 1 // tracks actual length of non-null entries.\r\n\t};\r\n\t// remove option selection\r\n\tremoveOption = (rm) => {\r\n\t\tlet options = this.state.options.filter(opt => {\r\n\t\t\treturn opt.key !== `${rm}`;\r\n\t\t});\r\n\t\tthis.props.appendDataset(rm,null);\r\n\t\tthis.setState({options});\r\n\t}\r\n        // add option selection\r\n\taddOption = () => {\r\n\t\tlet options = this.state.options.concat([\r\n\t\t\t<GenotypeSelector\r\n\t\t\t\tkey={this.state.count}\r\n\t\t\t\tidx={this.state.count}\r\n\t\t\t\tselected={this.props.selected}\r\n\t\t\t\tgenotypes={this.props.genotypes}\r\n\t\t\t\tappendDataset={this.props.appendDataset}\r\n\t\t\t\tremoveOption={this.removeOption}\r\n\t\t\t/>\r\n\t\t]);\r\n\t\tthis.setState({options,count:this.state.count+1});\r\n\t};\r\n\r\n\t// prevents issues when all options are removed\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\r\n\t\tif(this.props.selected !== prevProps.selected){\r\n\t\t\tthis.setState({'count':1, 'options':[]})\r\n\t\t}\r\n\t}\r\n\r\n\t// render component\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<fieldset className={'genotype-field'}>\r\n\t\t\t\t<legend> Comparison Genotypes </legend>\r\n\t\t\t\t{this.state.options}\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={'fake-button'}\r\n\t\t\t\t\tonClick={this.addOption}\r\n\t\t\t\t>\r\n\t\t\t\t\tAdd Comparison\r\n\t\t\t\t</div>\r\n\t\t\t</fieldset>\r\n\t\t);\r\n\t}\r\n}\r\n","/**\r\n * Control for editing LHS/RHS comparison options\r\n * for display in CViT canvas\r\n */\r\n\r\nimport React from 'react';\r\nimport Select from 'react-select';\r\nimport {heatConfig} from './HeatConfig';\r\nimport {histConfig} from './HistConfig';\r\nimport {haploConfig} from './HaploConfig';\r\n\r\n// Display format dropdown values\r\nconst displayFormats = [\r\n    {\r\n        value: 'none',\r\n        label: 'None'\r\n    },\r\n    {\r\n        value: 'hist',\r\n        label: 'Histogram'\r\n    },\r\n    {\r\n        value: 'heat',\r\n        label: 'Heatmap'\r\n    },\r\n    {\r\n        value: 'haplo',\r\n        label: 'Haplotype',\r\n    },\r\n];\r\n\r\n// Comparison format dropdown values\r\nconst comparisonFormats = [\r\n    {\r\n        value: 'diff',\r\n        label: 'Different'\r\n    },\r\n    {\r\n        value: 'same',\r\n        label: 'Same'\r\n    },\r\n    {\r\n        value: 'total',\r\n        label: 'Total'\r\n    },\r\n];\r\n\r\n// heatmap direction dropdown values\r\nconst heatFormat = [\r\n    {\r\n        value: 'low',\r\n        label: 'Min-Max'\r\n    },\r\n    {\r\n        value: 'high',\r\n        label: 'Max-Min'\r\n    },\r\n];\r\n\r\n// heatmap color dropdown values\r\nconst heatColorFormat = [\r\n    {\r\n        value: 'white',\r\n        label: 'White'\r\n    },\r\n    {\r\n        value: 'black',\r\n        label: 'Black'\r\n    },\r\n];\r\n\r\nexport default class TrackOptions extends React.Component {\r\n    state = {\r\n        displayAs: displayFormats[0],\r\n        compare: comparisonFormats[0],\r\n        filters: [],\r\n        heat: heatFormat[0],\r\n        heatColor: heatColorFormat[0],\r\n        viewConfig: {},\r\n        maxValue: 0,\r\n        minValue: 0,\r\n    }\r\n\r\n    /**\r\n     * set configuration on display type change from defaults\r\n     */\r\n    setConfiguration = (format) => {\r\n        const {compare,filters, maxValue, minValue} = this.state;\r\n        const side = this.props.side === 'Right';\r\n        let count = 1;\r\n        this.props.genotypes.forEach(gt => {if(gt !== null) count++;});\r\n        switch (format) {\r\n            case 'heat':\r\n               return heatConfig(compare,side,minValue,maxValue,filters);\r\n            case 'hist':\r\n               return histConfig(compare,side,minValue,maxValue,filters,count);\r\n            case 'haplo':\r\n                return haploConfig(compare,side,minValue,maxValue,filters,count);\r\n            case 'none':\r\n            default:\r\n                return {'feature':'none'};\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * update selected options in parents\r\n     */\r\n    optionsUpdate = (value) => {\r\n        this.props.optionsUpdate(this.props.side.toLowerCase(),value);\r\n    }\r\n\r\n    /**\r\n     * Action on changing DisplayAs dropdown\r\n     */\r\n    displayChange = (displayAs) => {\r\n        let viewConfig = this.setConfiguration(displayAs.value);\r\n        if(displayAs.value === 'haplo'){ // make sure haplotype block gets configured correctly\r\n            const maxValue = this.state.maxValue > 0 ? this.state.maxValue : 1;\r\n            const minValue = maxValue - 1;\r\n            this.setState({ displayAs,maxValue,minValue,viewConfig});\r\n        } else {\r\n            this.setState({displayAs, viewConfig});\r\n        }\r\n        this.optionsUpdate(viewConfig);\r\n    }\r\n\r\n    /**\r\n     * Update options on comparison type change\r\n     */\r\n    compareChange = (compare) => {\r\n        let viewConfig = this.state.viewConfig;\r\n        viewConfig.feature = compare.value;\r\n        this.setState({ compare, viewConfig });\r\n        this.optionsUpdate(viewConfig);\r\n    }\r\n\r\n\r\n    /**\r\n     * Update filter whitelist for features\r\n     */\r\n    filterChange = (filters) => {\r\n        let viewConfig = this.state.viewConfig;\r\n        viewConfig.class_filter = filters.map(filter => {if(filter!== null) return filter.value; return false;});\r\n        this.setState({ filters, viewConfig });\r\n        this.optionsUpdate(viewConfig);\r\n    }\r\n\r\n    /**\r\n     * Update heatcolor from dropdown\r\n     */\r\n    heatColorChange = (heatColor) => {\r\n        let viewConfig = this.state.viewConfig;\r\n        viewConfig.class_heat = [heatColor.value];\r\n        this.setState({ heatColor, viewConfig });\r\n        this.optionsUpdate(viewConfig);\r\n    }\r\n\r\n    /**\r\n     * Update direction from dropdown\r\n     */\r\n    heatChange = (heat) => {\r\n        let viewConfig = this.state.viewConfig;\r\n        viewConfig.invert_value = heat.value === 'low' ? 0 : 1;\r\n        this.setState({ heat, viewConfig });\r\n        this.optionsUpdate(viewConfig);\r\n    }\r\n    \r\n    /**\r\n     * Update bin count max from form\r\n     */\r\n    maxChange = (max) => {\r\n        const maxValue = parseInt(max.target.value) || 0;\r\n        let viewConfig = this.state.viewConfig;\r\n\r\n        if(this.state.displayAs.value === 'haplo'){\r\n            const hapMax = maxValue > 0 ? maxValue : 1;\r\n            const minValue = hapMax -1;\r\n            viewConfig.bin_max = hapMax;\r\n            viewConfig.bin_min = minValue;\r\n            this.setState({maxValue,minValue,viewConfig})\r\n        } else {\r\n            viewConfig.bin_max = maxValue;\r\n            this.setState({maxValue,viewConfig})\r\n        }\r\n        this.optionsUpdate(viewConfig);\r\n    }\r\n\r\n    /**\r\n     * Update bin count min from form\r\n     */\r\n    minChange = (min) => {\r\n        const minValue = parseInt(min.target.value) || 0;\r\n        let viewConfig = this.state.viewConfig;\r\n        viewConfig.bin_min = minValue;\r\n        this.setState({minValue,viewConfig});\r\n        this.optionsUpdate(viewConfig);\r\n    }\r\n\r\n    render(props,state) {\r\n        const { displayAs, compare, filters, heatColor, heat, maxValue, minValue } = this.state;\r\n        const { side, genotypes } = this.props;\r\n        let filterFormats = [];\r\n        genotypes.forEach( (gt,count) => {\r\n            if((compare.value === 'total' || count > 0) && gt !== null){\r\n                filterFormats = filterFormats.concat( gt.genotype);\r\n            }\r\n        });\r\n\r\n\t// hide filter dropdown if \"none\" is selected\r\n        let filter = displayAs.value !== 'none'\r\n            ? (<div className={'pure-u-1-3 l-box'}>\r\n                    <span>Filter Genotypes</span>\r\n                    <Select\r\n                        defaultValue={null}\r\n                        className=\"basic-multi-select git-option\"\r\n                        isMulti\r\n                        isClearable\r\n                        name={\"filterGT\"}\r\n                        classNamePrefix=\"select\"\r\n                        value={filters}\r\n                        onChange={this.filterChange}\r\n                        options={filterFormats}\r\n                    />\r\n                </div>\r\n            )\r\n            : null; \r\n\r\n        return (\r\n            <fieldset className={'genotype-field'}>\r\n                <legend> {`${side} Options`} </legend>\r\n                <div className={'pure-g genotype-select'}>\r\n                    <div className={'pure-u-1-6 l-box'}>\r\n                        <span>Display Type</span>\r\n                        <Select\r\n                            defaultValue={displayFormats[0]}\r\n                            className=\"basic-single git-option\"\r\n                            classNamePrefix=\"select\"\r\n                            value={displayAs}\r\n                            label={\"Display As:\"}\r\n                            onChange={this.displayChange}\r\n                            options={displayFormats}\r\n                        />\r\n                    </div>\r\n                    {displayAs.value !== 'none' ?\r\n                        <div className={'pure-u-1-6 l-box'}>\r\n                            <span>Comparison</span>\r\n                            <Select\r\n                                defaultValue={comparisonFormats[0]}\r\n                                className=\"basic-single git-option\"\r\n                                classNamePrefix=\"select\"\r\n                                value={compare}\r\n                                label={`Comparison ${side}`}\r\n                                onChange={this.compareChange}\r\n                                options={comparisonFormats}\r\n                            />\r\n                        </div>\r\n                        : null\r\n                    }\r\n                    {filter}\r\n                    {displayAs.value === 'none'\r\n                        ? null\r\n                        :\r\n                        <div className={'pure-u-1-6 l-box'}>\r\n                            <span>{displayAs.value === 'heat' || displayAs.value === 'hist' ? 'Max Value' : 'Threshold' }</span>\r\n                            <input type={'text'} value={maxValue} className={'pure-u-1-1 l-box git-option'} id={`max-${side}`} placeholder={'0'} onInput={(e) => this.maxChange(e)}/>\r\n\r\n                        </div>\r\n                    }\r\n                    {displayAs.value !== 'none' && displayAs.value !== 'haplo'\r\n                        ?\r\n                        <div className={'pure-u-1-6 l-box'}>\r\n                            <span>Min Value</span>\r\n                            <input type={'text'} value={minValue} className={'pure-u-1-1 l-box git-option'} id={`min-${side}`} placeholder={'0'} onInput={(e) => this.minChange(e)}/>\r\n                        </div>\r\n                        :\r\n                        null\r\n                    }\r\n                </div>\r\n                {displayAs.value === 'heat'\r\n                    ?\r\n                    <div className={'pure-g genotype-select'}>\r\n                        <div className={'pure-u-1-6 l-box'}>\r\n                            <div className={'pure-u-1-1 l-box'}> <br/> </div>\r\n                        </div>\r\n                        <div className={'pure-u-1-6 l-box'}>\r\n                            <span>Heat Base Color</span>\r\n                            <Select\r\n                                defaultValue={heatColorFormat[0]}\r\n                                className=\"basic-single git-option\"\r\n                                classNamePrefix=\"select\"\r\n                                value={heatColor}\r\n                                onChange={this.heatColorChange}\r\n                                options={heatColorFormat}\r\n                            />\r\n                        </div>\r\n                        <div className={'pure-u-1-6 l-box'}>\r\n                            <span>Heat Direction</span>\r\n                            <Select\r\n                                defaultValue={heatFormat[0]}\r\n                                className=\"basic-single git-option\"\r\n                                classNamePrefix=\"select\"\r\n                                value={heat}\r\n                                onChange={this.heatChange}\r\n                                options={heatFormat}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    :\r\n                    null}\r\n            </fieldset>\r\n        );\r\n    }\r\n}\r\n","/**\r\n * Set default settings for heat map display type\r\n */\r\n\r\nimport {binSizeDefault} from \"./DefaultConfiguration\";\r\n\r\nexport function heatConfig(compare, side, minValue, maxValue,filters){\r\n  return {\r\n      feature: compare.value,\r\n      glyph: 'measure',\r\n      display: 'heat',\r\n      draw_as: 'range',\r\n      invert_value: 0,\r\n      min: 0,\r\n      max: 0,\r\n      width: 10,\r\n      offset:  side ? 0 : -0,\r\n      bin_size: binSizeDefault,\r\n      bin_min: minValue,\r\n      bin_max: maxValue,\r\n      by_class: 1,\r\n      class_filter: filters.map( filter => filter.value),\r\n      class_offset: 2,\r\n      class_heat : ['#fff'],\r\n      draw_label: 0,\r\n      max_distance: 5,\r\n      border: 0,\r\n      value_base: 10,\r\n      generate_bins: 0,\r\n      count_classes: 0,\r\n      transparent: 0,\r\n      transparent_percent: 0.0\r\n  };\r\n}\r\n","/**\r\n * Set default options for histogram display\r\n */\r\nimport {binSizeDefault} from \"./DefaultConfiguration\";\r\n\r\nexport function histConfig(compare,side,minValue,maxValue,filters,count){\r\n    return {\r\n      feature: compare.value,\r\n      glyph: 'measure',\r\n      display: 'histogram',\r\n      count_classes: 0,\r\n      enable_pileup: 0,\r\n      generate_bins: 0,\r\n      offset: side ? 0 : -0,\r\n      width: 3,\r\n      bin_min: minValue,\r\n      bin_max: maxValue,\r\n      bin_size: binSizeDefault,\r\n      by_class: 1,\r\n      class_offset : 0,\r\n      class_filter: filters.map( filter => filter.value),\r\n      draw_label: 0,\r\n      max_distance: count*25,\r\n      border: 1,\r\n      border_width :0,\r\n    };\r\n}\r\n","/**\r\n * Sets default options for \"haplotype\" display type\r\n */\r\n\r\nimport {binSizeDefault} from \"./DefaultConfiguration\";\r\n\r\nexport function haploConfig(compare,side,minValue,maxValue,filters){\r\n  return {\r\n    feature : compare.value,\r\n    glyph: 'measure',\r\n    display: 'histogram',\r\n    count_classes: 0,\r\n    class_offset: 0,\r\n    class_space : 1,\r\n    enable_pileup: 0,\r\n    generate_bins: 0,\r\n    offset: side ? 0 : -0,\r\n    width: 3,\r\n    bin_min: maxValue -1 > 0 ? maxValue - 1 : 0 ,\r\n    bin_max: maxValue > 0 ?  maxValue : 1,\r\n    bin_size: binSizeDefault,\r\n    by_class: 1,\r\n    class_filter: filters.map( filter => filter.value),\r\n    draw_label: 0,\r\n    max_distance: 5,\r\n    border: 1,\r\n    border_width: 0,\r\n  };\r\n}\r\n","/**\r\n * Options configuration for rulers, bins and other general display.\r\n */\r\n\r\nimport React from 'react';\r\nimport Select from 'react-select';\r\nimport {rulerDisplayDefault, binSizeDefault,rulerIntervalDefault,titleDefault} from './DefaultConfiguration'; //sub-components\r\n\r\n/**\r\n * Quick setup for defining ruler options\r\n * @type {*[]}\r\n */\r\n\r\nconst rulerDisplayOptions = [\r\n    {\r\n        value: 'L',\r\n        label: 'Left'\r\n    },\r\n    {\r\n        value: 'R',\r\n        label: 'Right'\r\n    },\r\n    {\r\n        value: '1',\r\n        label: 'Both'\r\n    },\r\n    {\r\n        value: '0',\r\n        label: 'None'\r\n    },\r\n];\r\n\r\n/**\r\n * Options component react class\r\n */\r\nexport default class BaseOptions extends React.Component {\r\n    state = {\r\n        rulerDisplay : rulerDisplayDefault(rulerDisplayOptions), // Display ruler on LHS\r\n        binSize : binSizeDefault,   // Default binsize of 500000 bp\r\n        rulerInterval: rulerIntervalDefault, // Default interval of 5000000 bp\r\n        title: titleDefault,  // Blank default title\r\n    };\r\n\r\n    /**\r\n     * Pass updated options back to model\r\n     * @param value\r\n     */\r\n    optionsUpdate = (value) => {\r\n        this.props.optionsUpdate('general',value);\r\n    };\r\n    \r\n    /**\r\n     * Change ruler placement in cvit canvas component\r\n     * @param value\r\n     */\r\n    rulerChange = (rulerDisplay) => {\r\n        let values = this.state;\r\n        values.rulerDisplay = rulerDisplay;\r\n        this.setState({rulerDisplay});\r\n        this.optionsUpdate(values);\r\n    };\r\n\r\n\r\n    /**\r\n     * Change title in cvit canvas component\r\n     * @param e form event\r\n     */\r\n    titleChange = (e) => {\r\n        const title = e.target.value;\r\n        let values = this.state;\r\n        values.title = title;\r\n        this.setState({title});\r\n        this.optionsUpdate(values);\r\n    };\r\n\r\n    /**\r\n     * Change number of bases used for binning\r\n     * @param e form event\r\n     */\r\n    binChange = (e) => {\r\n        const binSize = parseInt(e.target.value) || 1;\r\n        let values = this.state;\r\n        values.binSize = binSize;\r\n        this.setState({binSize});\r\n        this.optionsUpdate(values);\r\n    };\r\n\r\n\r\n    /**\r\n     * Change major intervals on ruler in cvit component\r\n     * @param e form event\r\n     */\r\n    intervalChange = (e) => {\r\n        const rulerInterval = parseInt(e.target.value) || 1;\r\n        let values = this.state;\r\n        values.rulerInterval = rulerInterval;\r\n        this.setState({rulerInterval});\r\n        this.optionsUpdate(values);\r\n    };\r\n\r\n    \r\n    /**\r\n     * Render options component\r\n     * @param props react component props\r\n     * @param state react component state\r\n     */\r\n    render(props,state) {\r\n        const { rulerDisplay, binSize, rulerInterval, title } = this.state;\r\n        return (\r\n            <fieldset className={'genotype-field'}>\r\n                <legend> General Options </legend>\r\n                <div className={'pure-g genotype-select'}>\r\n                    <div className={'pure-u-1-2 l-box'}>\r\n                        <span> Title </span>\r\n                        <input type={'text'} value={title} className={'pure-u-1-1 l-box git-option'} id={`title-gen`} placeholder={titleDefault} onInput={e=>this.titleChange(e)} />\r\n                    </div>\r\n                    <div className={'pure-u-1-6 l-box'}>\r\n                        <span> Bin Size </span>\r\n                        <input type={'text'} value={binSize} className={'pure-u-1-1 l-box git-option'} id={`binsize-gen`} placeholder={binSizeDefault} onInput={e=>this.binChange(e)}/>\r\n                    </div>\r\n                    <div className={'pure-u-1-6 l-box'}>\r\n                        <span> Ruler Display </span>\r\n                        <Select\r\n                            defaultValue={rulerDisplayDefault(rulerDisplayOptions)}\r\n                            className=\"basic-single git-option\"\r\n                            classNamePrefix=\"select\"\r\n                            value={rulerDisplay}\r\n                            label={\"Comparison\"}\r\n                            onChange={this.rulerChange}\r\n                            options={rulerDisplayOptions}\r\n                        />\r\n                    </div>\r\n                    {rulerDisplay.value !== '0'\r\n                        ?\r\n                        <div className={'pure-u-1-6 l-box'}>\r\n                            <span> Ruler Interval </span>\r\n                            <input type={'text'} value={rulerInterval} className={'pure-u-1-1 l-box git-option'} id={`rulertic-gen`}\r\n                                   placeholder={rulerIntervalDefault} onInput={e=> this.intervalChange(e)}/>\r\n                        </div>\r\n                        : null\r\n                    }\r\n                </div>\r\n            </fieldset>\r\n        );\r\n    }\r\n}\r\n","/**\r\n * Form for controlling display options on the\r\n * CViT canvas div BaseOptions controls rulers/title\r\n * TrackOptions controls LHS/RHS options\r\n */\r\nimport React from 'react';\r\nimport TrackOptions from \"./TrackOptionsSelect\";\r\nimport BaseOptions from \"./BaseOptionsSelect\";\r\nimport {binSizeDefault} from \"./DefaultConfiguration\";\r\n\r\nexport default class OptionsForm extends React.Component {\r\n\tstate = {\r\n\t\t'binSize': binSizeDefault,\r\n\t}\r\n\t\r\n\t/**\r\n\t * Setup options and pass to parent\r\n\t */\r\n\toptionsUpdate = (group,value) => {\r\n\t\tlet options = this.props.options;\r\n\r\n\t\tlet binSize = this.state.binSize;\r\n\t\tswitch (group) {\r\n\t\t\tcase 'left':\r\n\t\t\t\toptions.left = value;\r\n\t\t\t\toptions.left.bin_size = binSize;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\toptions.right = value;\r\n\t\t\t\toptions.right.bin_size = binSize;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'general':\r\n\t\t\tdefault:\r\n\t\t\t\tbinSize = value.binSize;\r\n\t\t\t\toptions.general.title = value.title;\r\n\t\t\t\toptions.general.tick_interval = value.rulerInterval;\r\n\t\t\t\toptions.general.display_ruler = value.rulerDisplay.value;\r\n\t\t\t\toptions.left.bin_size = binSize;\r\n\t\t\t\toptions.right.bin_size = binSize;\r\n\t\t\t\tthis.setState({binSize});\r\n\t\t}\r\n\t\tthis.props.setOptions(options);\r\n\t}\r\n\r\n\trender(props,state) {\r\n\t\tconst { genotypes } = this.props;\r\n\t\treturn (\r\n\t\t\t<fieldset className={'genotype-field'} >\r\n\t\t\t\t<legend>Options </legend>\r\n\t\t\t\t<BaseOptions optionsUpdate={(group,value)=>this.optionsUpdate(group,value)} />\r\n\t\t\t\t<TrackOptions side={'Left'} genotypes={genotypes} optionsUpdate={(group,value)=>this.optionsUpdate(group,value)}/>\r\n\t\t\t\t<TrackOptions side={'Right'} genotypes={genotypes} optionsUpdate={(group,value)=>this.optionsUpdate(group,value)}/>\r\n\t\t\t</fieldset>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\n\r\nexport default class About extends React.Component {\r\n    render () {\r\n        return (\r\n            <div>\r\n                <div className={'pure-g'}>\r\n                    <h6> About </h6>\r\n                </div>\r\n                <div className={'pure-g'}>\r\n                    <div className={'pure-u-1-1 l-box modal-section'}>\r\n                        <p> \r\n                          GCViT: a multiple chromosome visualisation tool for \r\n                          visualizing resequencing or SNP array data. GCViT permits \r\n                          comparison of multiple accessions to a reference accession \r\n                          within a single dataset, to visually identify regions of \r\n                          similarities and differences across the genome. \r\n                        </p>\r\n                        <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/B2gPVUipWo0\" frameBorder=\"0\"\r\n                                allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\r\n                                allowFullScreen title=\"Introduction to GCViT\">\r\n                        </iframe>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nexport default class ReferenceGenotype extends React.Component {\r\n    state= {hideInfo:true};\r\n    render () {\r\n        const {hideInfo} = this.state;\r\n        return (\r\n            <div>\r\n                <div className={'pure-g'}>\r\n                    <div\r\n                        className={'pure-u-1-1 l-box fake-button'}\r\n                        onClick={()=>{this.setState({hideInfo:!hideInfo})}}\r\n                    >\r\n                        <div className={'pure-g'}>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                            <div className={'pure-u-5-6 l-box'}> Reference Genotype </div>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={'pure-g'}>\r\n                    <div className={'help-text pure-g'} style={{maxHeight: hideInfo ? '0px' : '50%'}}>\r\n                        <div className={'pure-u-1-1 l-box modal-section'}>\r\n                            <p>\r\n                                <ul>\r\n                                    <li> \r\n                                      Pick a Color that will represent the reference \r\n                                      genotype. Please note that this color will only \r\n                                      show up when total is selected in the display \r\n                                      options. \r\n                                    </li>\r\n                                    <li> \r\n                                      Pick a dataset to explore. Note that comparisons\r\n                                      can only be done within a single dataset.\r\n                                    </li>\r\n                                    <li>\r\n                                      Select which genotype will be the reference by \r\n                                      either typing in the name of the genotype or using \r\n                                      the pull down menu to see available genotypes. All\r\n                                      comparison genotypes selected in the next step will\r\n                                      be compared against this genotype.</li>\r\n                                </ul>\r\n                                *(note that large data sets may take a few seconds load,\r\n                                before the accession names to appear in the pull down\r\n                                menu.)\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class ComparisonGenotype extends React.Component {\r\n    state= {hideInfo:true};\r\n    render () {\r\n        const {hideInfo} = this.state;\r\n        return (\r\n            <div>\r\n                <div className={'pure-g'}>\r\n                    <div\r\n                        className={'pure-u-1-1 l-box fake-button'}\r\n                        onClick={()=>{this.setState({hideInfo:!hideInfo})}}\r\n                    >\r\n                        <div className={'pure-g'}>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                            <div className={'pure-u-5-6 l-box'}> Comparison Genotype </div>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={'pure-g'}>\r\n                    <div className={'help-text pure-g'} style={{maxHeight: hideInfo ? '0px' : '50%'}}>\r\n                        <div className={'pure-u-1-1 l-box modal-section'}>\r\n                            <p>\r\n                                One or more comparison genotypes can be specified. Note\r\n                                that Comparisons can only be made within the same dataset.\r\n                            </p>\r\n                            <p>\r\n                                <ul>\r\n                                    <li> \r\n                                      Pick a Color that will represent the comparison\r\n                                      genome. If comparing multiple genotypes it will be\r\n                                      important to pick distinct colors for each.\r\n                                    </li>\r\n                                    <li> \r\n                                      Select a comparison genotype by either typing in \r\n                                      the name of the genotype or using the pull down \r\n                                      menu to see available genotypes. \r\n                                    </li>\r\n                                    <li> \r\n                                      Remove a comparison genotype by clicking on the \r\n                                      <b>X</b>. \r\n                                    </li>\r\n                                </ul>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nexport default class GeneralOptions extends React.Component {\r\n    state= {hideInfo:true};\r\n    render () {\r\n        const {hideInfo} = this.state;\r\n        return (\r\n            <div>\r\n                <div className={'pure-g'}>\r\n                    <div\r\n                        className={'pure-u-1-1 l-box fake-button'}\r\n                        onClick={()=>{this.setState({hideInfo:!hideInfo})}}\r\n                    >\r\n                        <div className={'pure-g'}>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                            <div className={'pure-u-5-6 l-box'}> General Options </div>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={'pure-g'}>\r\n                    <div className={'help-text pure-g'} style={{maxHeight: hideInfo ? '0px' : '50%'}}>\r\n                        <div className={'pure-u-1-1 l-box modal-section'}>\r\n                            <p>\r\n                              <b>Title</b> <i>Default: blank</i> Title shown on the display. \r\n                            </p>\r\n                            <p> \r\n                              <b>Bin Size</b> <i>Default: 500000bp</i> Because the data \r\n                              on a whole genome display is highly condensed, it must be \r\n                              divided into bins, with the data within each bin averaged,\r\n                              counted, or otherwise combined into one value. Large \r\n                              genomes and/or very dense data sets suggest smaller bin \r\n                              sizes. However, setting the bin size too small will slow \r\n                              down rendering of the image to the point it may not display \r\n                              at all or it may become difficult or impossible to see \r\n                              differences in the data. For large genomes, it is \r\n                              recommended to not set the bin size much lower than \r\n                              500000.\r\n                            </p>\r\n                            <p> \r\n                              <b>Ruler Display</b> <i>Default: left</i> Where ruler is placed on the image. \r\n                            </p>\r\n                            <p> \r\n                              <b>Ruler Interval</b> <i>Default: 5000000</i> Measured in\r\n                              bp, indicates how often to draw tic marks on the ruler. \r\n                              Each major tic mark will be labeled with a number and have \r\n                              one minor division between. Any value below 1000000 is \r\n                              likely to cause labels to overlap and be unreadable.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class DisplayNone extends React.Component {\r\n    state= {hideInfo:true};\r\n    render () {\r\n        const {hideInfo} = this.state;\r\n        return (\r\n            <div>\r\n                <div className={'pure-g'}>\r\n                    <div\r\n                        className={'pure-u-1-1 l-box fake-button'}\r\n                        onClick={()=>{this.setState({hideInfo:!hideInfo})}}\r\n                    >\r\n                        <div className={'pure-g'}>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                            <div className={'pure-u-5-6 l-box'}> Display Type: None </div>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={'pure-g'}>\r\n                    <div className={'help-text pure-g'} style={{maxHeight: hideInfo ? '0px' : '50%'}}>\r\n                        <div className={'pure-u-1-1 l-box modal-section'}>\r\n                            <p>Don't render anything on this side of the chromosome backbone.</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class DisplayHaplotype extends React.Component {\r\n    state= {hideInfo:true};\r\n    render () {\r\n        const {hideInfo} = this.state;\r\n        return (\r\n            <div>\r\n                <div className={'pure-g'}>\r\n                    <div\r\n                        className={'pure-u-1-1 l-box fake-button'}\r\n                        onClick={()=>{this.setState({hideInfo:!hideInfo})}}\r\n                    >\r\n                        <div className={'pure-g'}>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                            <div className={'pure-u-5-6 l-box'}> Display Type: Haplotype </div>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={'pure-g'}>\r\n                    <div className={'help-text pure-g'} style={{maxHeight: hideInfo ? '0px' : '50%'}}>\r\n                        <div className={'pure-u-1-1 l-box modal-section'}>\r\n                            <p>Shows SNPs as block regions that only display if the count in the bin meets the provided threshold.</p>\r\n                            <p>\r\n                                This Display is good for:\r\n                                <ul>\r\n                                    <li> Viewing inheritance when comparing a line with its parents.</li>\r\n                                </ul>\r\n                            </p>\r\n                            <p> <b>Comparison</b> <i>Default: different</i>  Which comparison with the reference to display.\r\n                                <ul>\r\n                                    <li><b>Different</b>: Positions where reference and comparison line have different alleles.</li>\r\n                                    <li><b>Same</b>: Positions where reference and comparison line have the same alleles.</li>\r\n                                    <li><b>Total</b>: Total number of SNPs for reference and comparison, alongside a count for locations where the allele was undefined.</li>\r\n                                </ul>\r\n                            </p>\r\n                            <p> <b>Filter Genotypes</b> <i>Default: all [blank]</i> Allows the restriction of the displayed genotypes when more-than-one is available,\r\n                            due to either more-than-one comparison, or using the total comparison. If not empty, only the selected genotypes will display.  This option is useful if the user would like to see the differences between the reference and each comparison on opposite sides of the chromosome.\r\n                            </p>\r\n                            <p> <b>Threshold</b> <i>Default: 1</i> The glyph is only drawn if the count matches or exceeds this number.</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class DisplayHistogram extends React.Component {\r\n    state= {hideInfo:true};\r\n    render () {\r\n        const {hideInfo} = this.state;\r\n        return (\r\n            <div>\r\n                <div className={'pure-g'}>\r\n                    <div\r\n                        className={'pure-u-1-1 l-box fake-button'}\r\n                        onClick={()=>{this.setState({hideInfo:!hideInfo})}}\r\n                    >\r\n                        <div className={'pure-g'}>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                            <div className={'pure-u-5-6 l-box'}> Display Type: Histogram </div>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={'pure-g'}>\r\n                    <div className={'help-text pure-g'} style={{maxHeight: hideInfo ? '0px' : '50%'}}>\r\n                        <div className={'pure-u-1-1 l-box modal-section'}>\r\n                            <p>Shows SNPs as block regions with a height that is proportional to the count in the bin and the provided min and max values.\r\n                                Similar to the heat map option, but uses volume instead of color to indicate bin density.</p>\r\n                            <p> <b>Comparison</b> <i>Default: different</i>  Which comparison with the reference to display.\r\n                                <ul>\r\n                                    <li><b>Different</b>: Positions where reference and comparison line have different alleles.</li>\r\n                                    <li><b>Same</b>: Positions where reference and comparison line have the same alleles.</li>\r\n                                    <li><b>Total</b>: Total number of SNPs for reference and comparison, alongside a count for locations where the allele was undefined.</li>\r\n                                </ul>\r\n                            </p>\r\n                            <p> \r\n                              <b>Filter Genotypes</b> <i>Default: all [blank]</i> Select \r\n                              one or more genotypes or leave blank for all comparison \r\n                              genotypes.\r\n                            </p>\r\n                            <p> \r\n                              <b>Min Value</b> <i>Default: 0</i> Cutoff value for \r\n                              displaying any height on the glyph. Any count equal to or \r\n                              smaller than this number will not be displayed.\r\n                            </p>\r\n                            <p> \r\n                              <b>Max Value</b> <i>Default: 0</i> Cutoff value for \r\n                              displaying maximum height on the glyph. Any count equal to \r\n                              or larger than this number will be displayed as the full \r\n                              height. Here, 0 is shorthand for the largest count in the \r\n                              reference across all bins. \r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class DisplayHeat extends React.Component {\r\n    state= {hideInfo:true};\r\n    render () {\r\n        const {hideInfo} = this.state;\r\n        return (\r\n            <div>\r\n                <div className={'pure-g'}>\r\n                    <div\r\n                        className={'pure-u-1-1 l-box fake-button'}\r\n                        onClick={()=>{this.setState({hideInfo:!hideInfo})}}\r\n                    >\r\n                        <div className={'pure-g'}>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                            <div className={'pure-u-5-6 l-box'}> Display Type: Heatmap </div>\r\n                            <div className={'pure-u-1-12 l-box'} > <div className={hideInfo ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={'pure-g'}>\r\n                    <div className={'help-text pure-g'} style={{maxHeight: hideInfo ? '0px' : '50%'}}>\r\n                        <div className={'pure-u-1-1 l-box modal-section'}>\r\n                            <p>Shows SNPs as block regions with a color that is proportional to the count in the bin and the provided min and max values.\r\n                                Similar to the heat map option, but color instead of volume to indicate bin density.</p>\r\n                            <p> <b>Comparison</b> <i>Default: different</i>  Which comparison with the reference to display.\r\n                                <ul>\r\n                                    <li><b>Different</b>: Positions where reference and comparison line have different alleles.</li>\r\n                                    <li><b>Same</b>: Positions where reference and comparison line have the same alleles.</li>\r\n                                    <li><b>Total</b>: Total number of SNPs for reference and comparison, alongside a count for locations where the allele was undefined.</li>\r\n                                </ul>\r\n                            </p>\r\n                            <p> \r\n                              <b>Filter Genotypes</b> <i>Default: all [blank]</i> Select \r\n                              one or more genotypes or leave blank for all comparison \r\n                              genotypes.\r\n                            </p>\r\n                            <p> \r\n                              <b>Min Value</b> <i>Default: 0</i> Cutoff value for \r\n                              displaying any height on the glyph. Any count equal to or \r\n                              smaller than this number will not be displayed.\r\n                            </p>\r\n                            <p> \r\n                              <b>Max Value</b> <i>Default: 0</i> Cutoff value for \r\n                              displaying maximum height on the glyph. Any count equal to \r\n                              or larger than this number will be displayed as the full \r\n                              height. Here, 0 is shorthand for the largest count in the \r\n                              reference across all bins. \r\n                            </p>\r\n                            <p> \r\n                              <b>Heat Base Color</b> <i>Default: white</i> Choose to \r\n                              go from white -> color or black -> color \r\n                            </p>\r\n                            <p> \r\n                              <b>Heat Direction</b> <i>Default: Min-Max</i> Render heat \r\n                              low-to-high as  base -> color (Min-Max) or color -> base (Max-Min) \r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","/**\r\n * Container for managing help documentation\r\n * all help topic contents are found in\r\n * src/Components/HelpTopics\r\n */\r\n\r\nimport React from 'react';\r\nimport About from \"./HelpTopics/About\";\r\nimport ReferenceGenotype from \"./HelpTopics/ReferenceGenotype\";\r\nimport ComparisonGenotype from \"./HelpTopics/ComparisonGenotype\";\r\nimport GeneralOptions from \"./HelpTopics/GeneralOptions\";\r\nimport DisplayNone from \"./HelpTopics/DisplayNone\";\r\nimport DisplayHaplotype from \"./HelpTopics/DisplayHaplotype\";\r\nimport DisplayHistogram from \"./HelpTopics/DisplayHistogram\";\r\nimport DisplayHeat from \"./HelpTopics/DisplayHeat\";\r\n\r\nexport default class HelpModal extends React.Component {\r\n    render () {\r\n        return(\r\n            <div className={\"modal-area selector-container\"}>\r\n                <div className={\"modal-content\"} >\r\n                    <h5> GCViT - Genotype Comparison Visualisation Tool </h5>\r\n                    <hr />\r\n                    <div className={'modal-contents'}>\r\n                        <About/>\r\n                        <h6> Genotypes </h6>\r\n                        <ReferenceGenotype/>\r\n                        <ComparisonGenotype/>\r\n                        <h6> Options </h6>\r\n                        <GeneralOptions/>\r\n                        <DisplayNone/>\r\n                        <DisplayHistogram/>\r\n                        <DisplayHeat/>\r\n                        <DisplayHaplotype/>\r\n                    </div>\r\n                </div>\r\n                <div className={'modal-close'}>\r\n                    <button className={'pure-button  button-display modal-confirm'}\r\n                            onClick={()=>this.props.closeAction()}\r\n                    > Close </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","/**\r\n * React component for rendering the \"export data\" modal\r\n */\r\n\r\nimport React from 'react';\r\nimport {imageTitleDefault} from \"./DefaultConfiguration\";\r\n\r\nexport default class DataModal extends React.Component {\r\n    state = {\r\n        name: imageTitleDefault,\r\n        format: 'svg',\r\n        quality: .95,\r\n        gffOptions: {\r\n            'chromosome':true,\r\n            'diff':true,\r\n            'same':true,\r\n            'total':true\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Save image using configured parameters\r\n     */\r\n    onClickImage = async function(){\r\n\t//toggle on load indicator\r\n        let loadIndicator = document.getElementById(\"img-load\");\r\n        loadIndicator.classList.toggle(\"download-loading\");\r\n\tconst url = this.state.format === 'svg' ? await this.resolveSVGBlob() : this.resolvePngBlob();\r\n\tthis.saveImage(url);\r\n    }\r\n    \r\n    /**\r\n     * Convert canvas to SVG blob url\r\n     */\r\n    resolveSVGBlob = () =>{\r\n\t    return new Promise(resolve => {\r\n\t\t    setTimeout(() => { // use short timeout to give DOM chance to render load indicator div\r\n   \t        \tlet paper = window.cvit.model.paper;\r\n                \tlet url = 'data:image/svg+xml;utf8,' +\r\n                \tencodeURIComponent(paper.project.exportSVG({asString:true}));\r\n                \tlet name = this.state.name !== '' ? this.state.name : 'cvit';\r\n                \tname += `.${this.state.format}`;\r\n\t        \tresolve(url);\r\n\t\t    }, 500);\r\n\r\n\t    });\r\n    }\r\n\r\n    /**\r\n     * Convert canvas to png blob url\r\n     */\r\n    resolvePngBlob = () => {\r\n        return new Promise(resolve => {\r\n            setTimeout(() => {\r\n   \t        let paper = window.cvit.model.paper;\r\n                paper.project.view.element.toBlob((blob) => {\r\n                    let url = URL.createObjectURL(blob);\r\n                    this.saveImage(url);\r\n                    resolve(url);\r\n\t\t});\r\n            }, 20);\r\n        });\r\n    };\r\n    \r\n    /**\r\n     * Download generated url blob\r\n     */\r\n    saveImage = (url) => {\r\n        let name = this.state.name !== '' ? this.state.name : 'gcvit';\r\n        name += `.${this.state.format}`;\r\n        let link = document.createElement('a');\r\n        link.download = name;\r\n        link.href = url;\r\n        document.body.appendChild(link);\r\n\t// toggle off load indicator\r\n        let loadIndicator = document.getElementById(\"img-load\");\r\n        loadIndicator.classList.toggle(\"download-loading\");\r\n        link.click();\r\n    };\r\n\r\n    onClickData = () => {\r\n        let gff = '##gff-version 3.2.1';\r\n        let data = window.cvit.model.data;\r\n        let gffOpts = this.state.gffOptions;\r\n        let loadIndicator = document.getElementById(\"data-load\");\r\n        loadIndicator.classList.toggle(\"download-loading\");\r\n        for (let group in data) {\r\n            if(data.hasOwnProperty(group) && gffOpts[group]) {\r\n                let dataGroup = data[group];\r\n                if( dataGroup.hasOwnProperty('features')) {\r\n                    dataGroup.features.forEach(feature => {\r\n                        let line = `${feature.seqName}\\t${feature.source}\\t${feature.feature}\\t${feature.start}\\t${feature.end}\\t${feature.score}\\t${feature.strand}\\t${feature.frame}`;\r\n                        let attributes = '';\r\n                        for (let key in feature.attribute) {\r\n                            if (feature.attribute.hasOwnProperty(key)) {\r\n                                attributes += `${key}=${feature.attribute[key]};`\r\n                            }\r\n                        }\r\n                        gff +=`\\n${line}\\t${attributes}`;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        let url = 'data:text/plain;utf8,' +\r\n            encodeURIComponent(gff);\r\n\t// toggle off loading indicator\r\n        loadIndicator.classList.toggle(\"download-loading\");\r\n\t// open gff in new window\r\n        let win = window.open();\r\n        // noinspection HtmlDeprecatedAttribute\r\n        win.document.write('<iframe src=\"' + url  + '\" frameborder=\"0\" style=\"border:0; top:0; left:0; bottom:0; right:0; width:100%; height:100%;\" allowfullscreen></iframe>');\r\n        win.download('gcvit.gff');\r\n    };\r\n\r\n    onInput = (evt) =>{\r\n        this.setState({name:evt.target.value});\r\n    };\r\n\r\n    onSelect = (evt) => {\r\n        this.setState({format:evt.target.value});\r\n    };\r\n\r\n    onChecked = (evt) => {\r\n        let gffOptions = this.state.gffOptions;\r\n        gffOptions[evt.target.value] = !gffOptions[evt.target.value];\r\n        this.setState( {gffOptions});\r\n    };\r\n\r\n    render(props,state){\r\n        let {name,format,gffOptions} = this.state;\r\n        return(\r\n            <div className={\"modal-area\"}>\r\n                <div className={\"modal-content\"} >\r\n                    <h5> Downloads </h5>\r\n                    <hr />\r\n                    <div className={'modal-contents'}>\r\n                        <div className={'pure-g'}>\r\n                            <div className={'pure-u-1-1 l-box cvit cvit-modal'} id={'export-img-modal'} >\r\n                                <h5> Download Image </h5>\r\n                                <p> Download the current view as an image.</p>\r\n\r\n                                <form style={{width:'100%'}}>\r\n                                    <h6> Image Settings: </h6>\r\n                                    <tbody>\r\n                                    <tr>\r\n                                        <td><span>File Name: </span></td>\r\n                                        <td>\r\n                                            <input\r\n                                                type={'text'}\r\n                                                value={name}\r\n                                                onInput={(evt)=>this.onInput(evt)}\r\n                                                placeholder={'cvit'}\r\n                                            />\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td> <span> File Type: </span> </td>\r\n                                        <td>\r\n                                            <label>\r\n                                                <input\r\n                                                    id={'opt-svg'}\r\n                                                    type={'radio'}\r\n                                                    value={'svg'}\r\n                                                    onChange={(evt)=>this.onSelect(evt)}\r\n                                                    checked={format === 'svg'} />\r\n                                                <span> svg </span>\r\n                                            </label>\r\n                                        </td>\r\n                                        <td>\r\n                                            <label>\r\n                                                <input\r\n                                                    id={'opt-png'}\r\n                                                    type={'radio'}\r\n                                                    value={'png'}\r\n                                                    onChange={(evt)=>this.onSelect(evt)}\r\n                                                    checked={format === 'png'}\r\n                                                />\r\n                                                <span> png </span>\r\n                                            </label>\r\n                                        </td>\r\n                                    </tr>\r\n                                    </tbody>\r\n                                </form>\r\n\t\t\t\t<div id=\"img-load\" className={'gcvit-load-text'}> Generating Image: Please Wait </div>\t\r\n\t\t                <button className={'pure-button button-display modal-confirm'}\r\n                                        onClick={()=>this.onClickImage()}\r\n                                > Export Image </button>\r\n                            </div>\r\n                        </div>\r\n                        <div className={'pure-g'}>\r\n                            <hr />\r\n                            <div className={'pure-u-1-1 l-box cvit cvit-modal'} id={'export-data-modal'} >\r\n                                <h5> Download Data </h5>\r\n                                <p> Download data as a gff </p>\r\n\r\n                                <form style={{width:'100%'}}>\r\n                                    <h6> GFF Settings: </h6>\r\n                                    <tbody>\r\n                                    <tr>\r\n                                        <td> <span> Include: </span> </td>\r\n                                        <td>\r\n                                            <label>\r\n                                                <input\r\n                                                    id={'opt-chr'}\r\n                                                    type={'checkbox'}\r\n                                                    value={'chromosome'}\r\n                                                    onChange={(evt)=>this.onChecked(evt)}\r\n                                                    checked={gffOptions.chromosome}\r\n                                                />\r\n                                                <span> chromosome </span>\r\n                                            </label>\r\n                                        </td>\r\n                                        <td>\r\n                                            <label>\r\n                                                <input\r\n                                                    id={'opt-diff'}\r\n                                                    type={'checkbox'}\r\n                                                    value={'diff'}\r\n                                                    onChange={(evt)=>this.onChecked(evt)}\r\n                                                    checked={gffOptions.diff}\r\n                                                />\r\n                                                <span> different </span>\r\n                                            </label>\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>  </td>\r\n                                        <td>\r\n                                            <label>\r\n                                                <input\r\n                                                    id={'opt-same'}\r\n                                                    type={'checkbox'}\r\n                                                    value={'same'}\r\n                                                    onChange={(evt)=>this.onChecked(evt)}\r\n                                                    checked={gffOptions.same}\r\n                                                />\r\n                                                <span> same </span>\r\n                                            </label>\r\n                                        </td>\r\n                                        <td>\r\n                                            <label>\r\n                                                <input\r\n                                                    id={'opt-total'}\r\n                                                    type={'checkbox'}\r\n                                                    value={'total'}\r\n                                                    onChange={(evt)=>this.onChecked(evt)}\r\n                                                    checked={gffOptions.total}\r\n                                                />\r\n                                                <span> total </span>\r\n                                            </label>\r\n                                        </td>\r\n                                    </tr>\r\n                                    </tbody>\r\n                                </form>\r\n\t\t\t\t<div id=\"data-load\" className={\"gcvit-load-text\"}> Generating Gff: Please Wait </div>\r\n                                <button className={'pure-button button-display modal-confirm'}\r\n                                        onClick={()=>this.onClickData()}\r\n                                > Download Data </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={'modal-close'}>\r\n                    <button className={'pure-button  button-display modal-confirm'}\r\n                            onClick={()=>this.props.closeAction()}\r\n                    > Close </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","/**\r\n * Button to send request for gff to server and \r\n * re-render cvitjs canvas component with results.\r\n */\r\n\r\nimport React from 'react';\r\nimport {binSizeDefault} from \"./DefaultConfiguration\";\r\n\r\n\r\nexport default class DisplayButton extends React.Component {\r\n    state = {\r\n        priorRequest:{\r\n            request:'',\r\n            interval: binSizeDefault,\r\n            response:{}\r\n        },\r\n    };\r\n\r\n    /**\r\n     * craft request for new gff if needed, then re-render cvit canvas with new options\r\n     */\r\n    onSubmit = () => {\r\n        const { selected, options } = this.props;\r\n        const {priorRequest} = this.state;\r\n        let {headers} = this.props\r\n        let requestString = '';\r\n        let classes = {};\r\n        let count = 0;\r\n\t// iterate through selected GTs and build request string\r\n        selected.forEach((query, i) => {\r\n            if (query !== null && query.hasOwnProperty('dataset') && query.hasOwnProperty('genotype')\r\n                && query.dataset != null && query.genotype != null){\r\n                count++;\r\n                requestString =  i === 0 ? requestString+'Ref=' : requestString+'&Variant=';\r\n                requestString = requestString+encodeURIComponent(`${query.dataset.value}:${query.genotype.value}`);\r\n                classes[query.genotype.value] = query.color;\r\n            } else if(i === 0){\r\n                throw new Error('Reference must be selected.')\r\n            }\r\n        });\r\n        classes['undefined'] = 'black';\r\n\r\n        // Configure cvit model for new view\r\n        let cvit = window.cvit;\r\n        let model = cvit.model;\r\n        model._viewConfig.classes = classes;\r\n        const binSize = options.left.hasOwnProperty('bin_size') ? options.left.bin_size :\r\n            options.right.hasOwnProperty('bin_size') ? options.right.bin_size : binSizeDefault;\r\n        requestString = requestString + \"&Bin=\" + encodeURIComponent(binSize);\r\n        this.props.hide();\r\n\r\n        //fetch new data\r\n        if( (priorRequest.request !== requestString) ||\r\n            (binSize !== priorRequest.interval )\r\n        ) {\r\n            document.getElementById('cvit-app').style.visibility = 'visible';\r\n            this.setState({hideOptions:true});\r\n            model._viewData.same = {};\r\n            model._viewData.diff = {};\r\n            model._viewData.total = {};\r\n\r\n            headers.append(\"Content-Type\", \"application/x-www-form-urlencoded\")\r\n            console.log('auth-header', headers)\r\n\r\n            model.appendData('api/generateGff', {\r\n                method: 'POST',\r\n                headers: headers,\r\n                body: requestString,\r\n            })\r\n                .then(() =>{\r\n                    model._viewLayout.chrOrder = model._setChrOrder(model._viewData);\r\n                    let refMax = 0;\r\n                    let vd = model._viewData;\r\n                    Object.keys(vd.total).forEach(key => {\r\n                        let chr = vd.total[key];\r\n                        if (chr.hasOwnProperty('maxScore') && chr.maxScore.value > refMax) refMax = chr.maxScore.value;\r\n                    });\r\n                    this.setState({priorRequest:{response: model._viewData, request:requestString, interval:binSize, refMax}});\r\n                    this.setView(options, model, count,refMax);\r\n                })\r\n                .catch(e => {\r\n                    console.error('cvit.js: Error requesting data: ', e);\r\n                });\r\n        } else {\r\n            this.setView(options, model,count);\r\n        }\r\n    };\r\n\r\n    // update cvit canvas\r\n    setView = (options,model,count,refMax) =>{\r\n       if(options.left.bin_max === 0){\r\n           options.left.bin_max = options.left.display === 'heat' ? refMax : refMax*count;\r\n       }\r\n       if(options.right.bin_max === 0){\r\n           options.right.bin_max = options.right.display === 'heat' ? refMax : refMax*count;\r\n       }\r\n       model._viewConfig.left.class_heat = [];\r\n       model._viewConfig.right.class_heat = [];\r\n       model._viewConfig.left.class_filter = [];\r\n       model._viewConfig.right.class_filter = [];\r\n       model._viewConfig = model._combineObjects(model._viewConfig, options);\r\n       model._redraw = true;\r\n       model.setDirty(true);\r\n       model._inform();\r\n    };\r\n\r\n    /**\r\n     * render button component\r\n     */\r\n    render () {\r\n        return(\r\n            <button className={'pure-u-1-4 pure-button-primary button-action pure-button'} onClick={this.onSubmit}> Display </button>\r\n        );\r\n    }\r\n\r\n}\r\n","/**\r\n * @fileoverview Main gcvit ui app.\r\n * TODO: Update from class to hooks\r\n */\r\n\r\nimport React from 'react';\r\nimport ReactModal from 'react-modal';\r\n\r\nimport ReferenceForm from './Components/ReferenceForm';\r\nimport CompareForm from './Components/CompareForm';\r\nimport OptionsForm from './Components/OptionsForm';\r\nimport HelpModal from './Components/HelpModal'\r\nimport DataModal from \"./Components/DownloadModal\";\r\nimport DisplayButton from \"./Components/DisplayButton\";\r\nimport {rulerIntervalDefault, titleDefault} from \"./Components/DefaultConfiguration\";\r\n\r\nexport default class App extends React.Component {\r\n    state = {\r\n        datasets:[], //Datasets available from service\r\n        genotypes: {}, //All genotypes available in selected dataset\r\n        referenceDataset: null, //Dataset reference was chosen from\r\n        selected:[], //All selected datasets+genotypes for comparison\r\n        options: { //General configuration for selected data options\r\n            left:{\r\n                feature : 'none',\r\n                offset : -0,\r\n                draw_label : 0,\r\n            },\r\n            right:{\r\n                feature : 'none',\r\n                offset : 0,\r\n                draw_label : 0,\r\n            },\r\n            general:{\r\n                title: titleDefault,\r\n                display_ruler: 'L',\r\n                tick_interval: rulerIntervalDefault,\r\n            },\r\n        },\r\n        hideOptions: false, //show/hide the gcvit configuration UI\r\n        showModal: '', //show/hide overlay modals (dl/help)\r\n        auth: process.env.REACT_APP_USE_AUTH, //is react using authentication?\r\n        user: '', // passed username\r\n        pwd: '', // passed password\r\n        authHeader: new Headers(), //basicAuth header\r\n    };\r\n\r\n    /**\r\n     * GET request to API to fetch the available datasets to populate options\r\n     * @param {header} header\r\n     **/\r\n    loadDatasets = (header = this.state.authHeader) => {\r\n        fetch('api/experiment',{method:\"GET\", headers: header})\r\n            .then( response => response.json())\r\n            .then( datasets => {\r\n                this.setState({datasets});\r\n            })\r\n    };\r\n\r\n    /**\r\n     * Append a new comparison set to the display array\r\n     * @param {number} idx  index to add value to array\r\n     * @param {Object} value color+dataset+genotype object to append\r\n     */\r\n    appendDataset = (idx,value) => {\r\n        let selected = this.state.selected.slice();\r\n        selected[idx]=value;\r\n        this.setState({selected});\r\n    };\r\n\r\n    /**\r\n     * GET request to populate the genotype array\r\n     * @param {Object} referenceDataset dataset to draw genotypes from\r\n     */\r\n\r\n    setDataset = (referenceDataset) => {\r\n        let val = referenceDataset.value;\r\n        if( !this.state.genotypes[val]){\r\n            fetch(`api/experiment/${val}`,{method:\"GET\", headers: this.state.authHeader})\r\n                .then(result => result.json())\r\n                .then( genotype => {\r\n                    let genotypes = JSON.parse(JSON.stringify(this.state.genotypes));\r\n                    genotypes[val] = genotype;\r\n                    this.setState({referenceDataset, genotypes, selected:[]})\r\n                })\r\n        } else {\r\n            this.setState({referenceDataset,selected:[]})\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Edit display options\r\n     * @param {object} options display options\r\n     */\r\n    setOptions = (options) => {\r\n        this.setState(options);\r\n    };\r\n\r\n    /**\r\n     * Hide help/download modal at close\r\n     */\r\n    handleCloseModal = () => this.setState({ showModal: '' });\r\n\r\n    /**\r\n     * Display help/download modal at open\r\n     * @param {boolean} showModal\r\n     */\r\n    handleOpenModal = (showModal) => this.setState({showModal});\r\n\r\n    /**\r\n     * Username update\r\n     * @param e form event\r\n     */\r\n    userChange = (e) => {\r\n        const user = e.target.value;\r\n        this.setState({user});\r\n    };\r\n  \r\n    /**\r\n     * Update password from form\r\n     * @param e form event\r\n     */\r\n    passwordChange = (e) => {\r\n        const pwd = e.target.value;\r\n        this.setState({pwd});\r\n    };\r\n    /**\r\n     * Test curret credentials against server\r\n     */\r\n    checkAuthState = () => {\r\n        const authString = btoa(this.state.user+':'+this.state.pwd);\r\n        let authHeader = new Headers();\r\n        authHeader.append('Authorization', 'Basic '+ authString);\r\n        fetch('/login', {method:'GET', headers:authHeader})\r\n            .then (response => {\r\n                if( response.status === 202 ) {\r\n                    this.setState({authHeader});\r\n                    this.loadDatasets()\r\n                } else {\r\n                    window.alert(\"Invalid credentials.\")\r\n                }\r\n            })\r\n    };\r\n\r\n    /**\r\n     * Reset auth state to none\r\n     */\r\n    logout = () => {\r\n        const authHeader = new Headers();\r\n        const pwd = \"\";\r\n        const user = \"\";\r\n        let datasets = [];\r\n        this.setState({authHeader, user, pwd, datasets});\r\n        this.loadDatasets(authHeader);\r\n    };\r\n\r\n    /**\r\n     * After UI mounts, hide cvit-app until first comparison request is made, and populate\r\n     * list of available datasets\r\n     */\r\n    componentDidMount() {\r\n        document.getElementById('cvit-app').style.visibility = 'hidden';\r\n        this.loadDatasets()\r\n    };\r\n\r\n    /**\r\n     * Render app components\r\n     */\r\n    render() {\r\n        const { selected, options, hideOptions, showModal, auth, user, authHeader } = this.state;\r\n        let gts = this.state.referenceDataset !== null && this.state.genotypes[this.state.referenceDataset.value] !== undefined\r\n            ? this.state.genotypes[this.state.referenceDataset.value]\r\n            : [];\r\n\r\n        return (\r\n            <div className={'selector-container'}>\r\n                <ReactModal\r\n                    isOpen={showModal === 'data'}\r\n                    onRequestClose={this.handleCloseModal}\r\n                    shouldCloseOnOverlayClick={true}\r\n                >\r\n                    <DataModal closeAction={()=>this.handleOpenModal()} />\r\n                </ReactModal>\r\n                <ReactModal\r\n                    isOpen={showModal === 'help'}\r\n                    onRequestClose={this.handleCloseModal}\r\n                    shouldCloseOnOverlayClick={true}\r\n                >\r\n                        <HelpModal closeAction={()=>this.handleOpenModal()} />\r\n                </ReactModal>\r\n\r\n                <div\r\n                    className={'pure-u-1-1 l-box fake-button'}\r\n                    onClick={()=>{this.setState({hideOptions:!hideOptions})}}\r\n                >\r\n                    <div className={'pure-g'}>\r\n                        <div className={'pure-u-1-12 l-box'} > <div className={hideOptions ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                        <div className={'pure-u-5-6 l-box'}> Configure View </div>\r\n                        <div className={'pure-u-1-12 l-box'} > <div className={hideOptions ? 'arrow-down rotate':'arrow-down'}/> </div>\r\n                    </div>\r\n                </div>\r\n                <form className={'display-options'} style={{maxHeight: hideOptions ? '0px' : '100%', overflow: hideOptions ? 'hidden' : 'visible'}}>\r\n                    { auth === \"TRUE\" ?\r\n                       !authHeader.has(\"Authorization\") ?\r\n                            <fieldset className={'genotype-field'}>\r\n                                <legend> Login </legend>\r\n                                <div className={'pure-g genotype-select'}>\r\n                                    <div className={'pure-u-5-12 l-box '}>\r\n                                        <input type={'text'} className={'pure-u-1-1 l-box git-option'} placeholder={'username'} onInput={e=>this.userChange(e)} />\r\n                                    </div>\r\n                                    <div className={'pure-u-5-12 l-box'}>\r\n                                        <input type={'password'} className={'pure-u-1-1 l-box git-option'} placeholder={'password'} onInput={e=>this.passwordChange(e)} />\r\n                                    </div>\r\n                                    <div className={'pure-u-2-12 l-box'}>\r\n                                        <div className={'fake-button git-option'} onClick={()=> this.checkAuthState()} > Login </div>\r\n                                    </div>\r\n                                </div>\r\n                            </fieldset>\r\n                            :\r\n                            <fieldset className={'genotype-field'}>\r\n                                <legend> Login </legend>\r\n                                <div className={'pure-g genotype-select'}>\r\n                                    <div className={'pure-u-10-12 l-box '}>\r\n                                        <div className={'pure-u-1-1 l-box'} style={{\"width\":\"100%\"}}> {`Logged in as ${user}`} </div>\r\n                                    </div>\r\n                                    <div className={'pure-u-2-12 l-box'}>\r\n                                        <div className={'fake-button git-option'} onClick={()=> this.logout()} > Logout </div>\r\n                                    </div>\r\n                                </div>\r\n                            </fieldset>\r\n                        :\r\n                        null\r\n                    }\r\n                    <ReferenceForm datasets={this.state.datasets} setDataset={this.setDataset} appendDataset={this.appendDataset} genotypes={gts} />\r\n                    { selected.length > 0 && selected[0].genotype !== null\r\n                        ? <CompareForm selected={this.state.referenceDataset} genotypes={gts} appendDataset={this.appendDataset} />\r\n                        : null\r\n                    }\r\n                    <OptionsForm setOptions ={this.setOptions} genotypes={selected} options={options}/>\r\n                </form>\r\n                <div className={'pure-g'}>\r\n                    <DisplayButton selected={selected} options={options} headers={authHeader} hide={()=>{this.setState({hideOptions:true});}}/>\r\n                    <div className={'pure-u-5-24 '}><br /></div>\r\n                    <button className={'pure-u-1-4  pure-button button-display'} onClick={()=>this.handleOpenModal('data')}> Download </button>\r\n                    <div className={'pure-u-1-24'} />\r\n                    <button className={'pure-u-1-4  pure-button button-display'} onClick={()=>this.handleOpenModal('help')}> Help </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'purecss/build/grids.css';\r\nimport 'purecss/build/buttons.css';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n// Initial entry point, bind gcvit ui to 'selector-app' div\r\nReactDOM.render(<App />, document.getElementById('selector-app'));\r\n\r\n"],"sourceRoot":""}