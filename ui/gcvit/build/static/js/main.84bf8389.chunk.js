(this.webpackJsonpgtux=this.webpackJsonpgtux||[]).push([[0],{121:function(e,t,a){e.exports=a(304)},128:function(e,t,a){},304:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(29),o=a.n(r),s=(a(126),a(127),a(128),a(6)),i=a(7),c=a(9),u=a(8),m=a(78),p=a.n(m),d=a(80),h=a(81),f=a(24),v=a(32),b=a(10),g=a(119);function E(e){return e[0]}var y="GCViT"+(new Date).toDateString(),w={position:"absolute",zIndex:"2"},N={position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},x=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={selectedDataset:null,selectedGenotype:null,displayColorPicker:!1,color:"#19741A"},e.datasetChange=function(t){e.setState({selectedDataset:t,selectedGenotype:null}),e.props.setDataset(t);var a={dataset:t,genotype:null,color:e.state.color||null};e.props.appendDataset(e.props.idx,a)},e.gtChange=function(t){e.setState({selectedGenotype:t});var a={dataset:e.state.selectedDataset,genotype:t,color:e.state.color||null};e.props.appendDataset(e.props.idx,a)},e.colorClick=function(){e.setState({displayColorPicker:!0})},e.colorClose=function(){e.setState({displayColorPicker:!1}),e.props.appendDataset(e.props.idx,e.formatDatasetValue())},e.colorSet=function(t){e.setState({color:t.hex})},e}return Object(i.a)(a,[{key:"formatDatasetValue",value:function(){return{dataset:this.state.selectedDataset||null,genotype:this.state.selectedGenotype||null,color:this.state.color||null}}},{key:"componentDidMount",value:function(){this.props.selected&&this.setState({selectedDataset:this.props.selected})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedDataset,n=t.selectedGenotype,r=this.props.idx,o=null!==this.props.genotypes?this.props.genotypes:[];return l.a.createElement("div",null,l.a.createElement("div",{className:"pure-g genotype-select"},l.a.createElement("div",{className:"pure-u-1-12 l-box "},l.a.createElement("span",null," Color "),l.a.createElement("br",null),l.a.createElement("div",{className:"fake-button git-option",onClick:this.colorClick,style:{background:this.state.color,zIndex:1}}),this.state.displayColorPicker?l.a.createElement("div",null,l.a.createElement("div",{style:N,onClick:this.colorClose}),l.a.createElement("div",{style:w},l.a.createElement(g.SketchPicker,{color:this.state.color,onChange:this.colorSet}))):null),l.a.createElement("div",{className:"pure-u-5-12 l-box"},l.a.createElement("span",null," Dataset "),l.a.createElement("br",null),l.a.createElement(f.a,{defaultValue:this.props.selected||null,label:"Dataset",className:"basic-single git-option",classNamePrefix:"select",value:a,isClearable:!0,isDisabled:this.props.selected,onChange:this.datasetChange,filterOption:Object(v.c)({ignoreAccents:!1}),options:this.props.datasets,components:{Option:C}})),l.a.createElement("div",{className:"pure-u-1-3 l-box"},l.a.createElement("span",null," Genotype "),l.a.createElement("br",null),l.a.createElement(f.a,{className:"basic-single git-option",classNamePrefix:"select",value:n,isClearable:!0,isDisabled:0===o.length,onChange:this.gtChange,filterOption:Object(v.c)({ignoreAccents:!1}),options:o,components:{Option:C}})),void 0!==this.props.removeOption?l.a.createElement("div",{className:"pure-u-1-12 l-box"},l.a.createElement("span",null,"Remove"),l.a.createElement("div",{className:"fake-button git-option",onClick:function(){return e.props.removeOption(r)}}," X ")):null))}}]),a}(l.a.Component),C=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.innerProps,a=(e.isFocused,Object(h.a)(e,["innerProps","isFocused"])),n=(t.onMouseMove,t.onMouseOver,Object(h.a)(t,["onMouseMove","onMouseOver"])),r=Object(d.a)({innerProps:Object(d.a)({},n)},a);return l.a.createElement(b.g.Option,Object.assign({},r,{className:"git-option-component"}),this.props.children)}}]),a}(l.a.Component),O=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("fieldset",{className:"genotype-field"},l.a.createElement("legend",null," Reference Genotype"),l.a.createElement(x,{datasets:this.props.datasets,setDataset:this.props.setDataset,appendDataset:this.props.appendDataset,genotypes:this.props.genotypes,idx:0}))}}]),a}(l.a.Component),k=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={options:[],count:1},e.removeOption=function(t){var a=e.state.options.filter((function(e){return e.key!=="".concat(t)}));e.props.appendDataset(t,null),e.setState({options:a})},e.addOption=function(){var t=e.state.options.concat([l.a.createElement(x,{key:e.state.count,idx:e.state.count,selected:e.props.selected,genotypes:e.props.genotypes,appendDataset:e.props.appendDataset,removeOption:e.removeOption})]);e.setState({options:t,count:e.state.count+1})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.props.selected!==e.selected&&this.setState({count:1,options:[]})}},{key:"render",value:function(){return l.a.createElement("fieldset",{className:"genotype-field"},l.a.createElement("legend",null," Comparison Genotypes "),this.state.options,l.a.createElement("div",{className:"fake-button",onClick:this.addOption},"Add Comparison"))}}]),a}(l.a.Component);function S(e,t,a,n,l){return{feature:e.value,glyph:"measure",display:"heat",draw_as:"range",invert_value:0,min:0,max:0,width:10,offset:t?0:-0,bin_size:5e5,bin_min:a,bin_max:n,by_class:1,class_filter:l.map((function(e){return e.value})),class_offset:2,class_heat:["#fff"],draw_label:0,max_distance:5,border:0,value_base:10,generate_bins:0,count_classes:0,transparent:0,transparent_percent:0}}function D(e,t,a,n,l,r){return{feature:e.value,glyph:"measure",display:"histogram",count_classes:0,enable_pileup:0,generate_bins:0,offset:t?0:-0,width:3,bin_min:a,bin_max:n,bin_size:5e5,by_class:1,class_offset:0,class_filter:l.map((function(e){return e.value})),draw_label:0,max_distance:25*r,border:1,border_width:0}}function j(e,t,a,n,l){return{feature:e.value,glyph:"measure",display:"histogram",count_classes:0,class_offset:0,class_space:1,enable_pileup:0,generate_bins:0,offset:t?0:-0,width:3,bin_min:n-1>0?n-1:0,bin_max:n>0?n:1,bin_size:5e5,by_class:1,class_filter:l.map((function(e){return e.value})),draw_label:0,max_distance:5,border:1,border_width:0}}var _=[{value:"none",label:"None"},{value:"hist",label:"Histogram"},{value:"heat",label:"Heatmap"},{value:"haplo",label:"Haplotype"}],I=[{value:"diff",label:"Different"},{value:"same",label:"Same"},{value:"total",label:"Total"}],P=[{value:"low",label:"Min-Max"},{value:"high",label:"Max-Min"}],V=[{value:"white",label:"White"},{value:"black",label:"Black"}],A=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={displayAs:_[0],compare:I[0],filters:[],heat:P[0],heatColor:V[0],viewConfig:{},maxValue:0,minValue:0},e.setConfiguration=function(t){var a=e.state,n=a.compare,l=a.filters,r=a.maxValue,o=a.minValue,s="Right"===e.props.side,i=1;switch(e.props.genotypes.forEach((function(e){null!==e&&i++})),t){case"heat":return S(n,s,o,r,l);case"hist":return D(n,s,o,r,l,i);case"haplo":return j(n,s,0,r,l);case"none":default:return{feature:"none"}}},e.optionsUpdate=function(t){e.props.optionsUpdate(e.props.side.toLowerCase(),t)},e.displayChange=function(t){var a=e.setConfiguration(t.value);if("haplo"===t.value){var n=e.state.maxValue>0?e.state.maxValue:1,l=n-1;e.setState({displayAs:t,maxValue:n,minValue:l,viewConfig:a})}else e.setState({displayAs:t,viewConfig:a});e.optionsUpdate(a)},e.compareChange=function(t){var a=e.state.viewConfig;a.feature=t.value,e.setState({compare:t,viewConfig:a}),e.optionsUpdate(a)},e.filterChange=function(t){var a=e.state.viewConfig;null===t&&(t=[]),a.class_filter=t.map((function(e){return!(null===e||!e.value)&&e.value})),e.setState({filters:t,viewConfig:a}),e.optionsUpdate(a)},e.heatColorChange=function(t){var a=e.state.viewConfig;a.class_heat=[t.value],e.setState({heatColor:t,viewConfig:a}),e.optionsUpdate(a)},e.heatChange=function(t){var a=e.state.viewConfig;a.invert_value="low"===t.value?0:1,e.setState({heat:t,viewConfig:a}),e.optionsUpdate(a)},e.maxChange=function(t){var a=parseInt(t.target.value)||0,n=e.state.viewConfig;if("haplo"===e.state.displayAs.value){var l=a>0?a:1,r=l-1;n.bin_max=l,n.bin_min=r,e.setState({maxValue:a,minValue:r,viewConfig:n})}else n.bin_max=a,e.setState({maxValue:a,viewConfig:n});e.optionsUpdate(n)},e.minChange=function(t){var a=parseInt(t.target.value)||0,n=e.state.viewConfig;n.bin_min=a,e.setState({minValue:a,viewConfig:n}),e.optionsUpdate(n)},e}return Object(i.a)(a,[{key:"render",value:function(e,t){var a=this,n=this.state,r=n.displayAs,o=n.compare,s=n.filters,i=n.heatColor,c=n.heat,u=n.maxValue,m=n.minValue,p=this.props,d=p.side,h=p.genotypes,v=[];h.forEach((function(e,t){("total"===o.value||t>0)&&null!==e&&(v=v.concat(e.genotype))}));var b="none"!==r.value?l.a.createElement("div",{className:"pure-u-1-3 l-box"},l.a.createElement("span",null,"Filter Genotypes"),l.a.createElement(f.a,{defaultValue:null,className:"basic-multi-select git-option",isMulti:!0,isClearable:!0,name:"filterGT",classNamePrefix:"select",value:s,onChange:this.filterChange,options:v})):null;return l.a.createElement("fieldset",{className:"genotype-field"},l.a.createElement("legend",null," ","".concat(d," Options")," "),l.a.createElement("div",{className:"pure-g genotype-select"},l.a.createElement("div",{className:"pure-u-1-6 l-box"},l.a.createElement("span",null,"Display Type"),l.a.createElement(f.a,{defaultValue:_[0],className:"basic-single git-option",classNamePrefix:"select",value:r,label:"Display As:",onChange:this.displayChange,options:_})),"none"!==r.value?l.a.createElement("div",{className:"pure-u-1-6 l-box"},l.a.createElement("span",null,"Comparison"),l.a.createElement(f.a,{defaultValue:I[0],className:"basic-single git-option",classNamePrefix:"select",value:o,label:"Comparison ".concat(d),onChange:this.compareChange,options:I})):null,b,"none"===r.value?null:l.a.createElement("div",{className:"pure-u-1-6 l-box"},l.a.createElement("span",null,"heat"===r.value||"hist"===r.value?"Max Value":"Threshold"),l.a.createElement("input",{type:"text",value:u,className:"pure-u-1-1 l-box git-option",id:"max-".concat(d),placeholder:"0",onInput:function(e){return a.maxChange(e)}})),"none"!==r.value&&"haplo"!==r.value?l.a.createElement("div",{className:"pure-u-1-6 l-box"},l.a.createElement("span",null,"Min Value"),l.a.createElement("input",{type:"text",value:m,className:"pure-u-1-1 l-box git-option",id:"min-".concat(d),placeholder:"0",onInput:function(e){return a.minChange(e)}})):null),"heat"===r.value?l.a.createElement("div",{className:"pure-g genotype-select"},l.a.createElement("div",{className:"pure-u-1-6 l-box"},l.a.createElement("div",{className:"pure-u-1-1 l-box"}," ",l.a.createElement("br",null)," ")),l.a.createElement("div",{className:"pure-u-1-6 l-box"},l.a.createElement("span",null,"Heat Base Color"),l.a.createElement(f.a,{defaultValue:V[0],className:"basic-single git-option",classNamePrefix:"select",value:i,onChange:this.heatColorChange,options:V})),l.a.createElement("div",{className:"pure-u-1-6 l-box"},l.a.createElement("span",null,"Heat Direction"),l.a.createElement(f.a,{defaultValue:P[0],className:"basic-single git-option",classNamePrefix:"select",value:c,onChange:this.heatChange,options:P}))):null)}}]),a}(l.a.Component),T=[{value:"L",label:"Left"},{value:"R",label:"Right"},{value:"1",label:"Both"},{value:"0",label:"None"}],M=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={rulerDisplay:E(T),binSize:5e5,rulerInterval:5e6,title:""},e.optionsUpdate=function(t){e.props.optionsUpdate("general",t)},e.rulerChange=function(t){var a=e.state;a.rulerDisplay=t,e.setState({rulerDisplay:t}),e.optionsUpdate(a)},e.titleChange=function(t){var a=t.target.value,n=e.state;n.title=a,e.setState({title:a}),e.optionsUpdate(n)},e.binChange=function(t){var a=parseInt(t.target.value)||1,n=e.state;n.binSize=a,e.setState({binSize:a}),e.optionsUpdate(n)},e.intervalChange=function(t){var a=parseInt(t.target.value)||1,n=e.state;n.rulerInterval=a,e.setState({rulerInterval:a}),e.optionsUpdate(n)},e}return Object(i.a)(a,[{key:"render",value:function(e,t){var a=this,n=this.state,r=n.rulerDisplay,o=n.binSize,s=n.rulerInterval,i=n.title;return l.a.createElement("fieldset",{className:"genotype-field"},l.a.createElement("legend",null," General Options "),l.a.createElement("div",{className:"pure-g genotype-select"},l.a.createElement("div",{className:"pure-u-1-2 l-box"},l.a.createElement("span",null," Title "),l.a.createElement("input",{type:"text",value:i,className:"pure-u-1-1 l-box git-option",id:"title-gen",placeholder:"",onInput:function(e){return a.titleChange(e)}})),l.a.createElement("div",{className:"pure-u-1-6 l-box"},l.a.createElement("span",null," Bin Size "),l.a.createElement("input",{type:"text",value:o,className:"pure-u-1-1 l-box git-option",id:"binsize-gen",placeholder:5e5,onInput:function(e){return a.binChange(e)}})),l.a.createElement("div",{className:"pure-u-1-6 l-box"},l.a.createElement("span",null," Ruler Display "),l.a.createElement(f.a,{defaultValue:E(T),className:"basic-single git-option",classNamePrefix:"select",value:r,label:"Comparison",onChange:this.rulerChange,options:T})),"0"!==r.value?l.a.createElement("div",{className:"pure-u-1-6 l-box"},l.a.createElement("span",null," Ruler Interval "),l.a.createElement("input",{type:"text",value:s,className:"pure-u-1-1 l-box git-option",id:"rulertic-gen",placeholder:5e6,onInput:function(e){return a.intervalChange(e)}})):null))}}]),a}(l.a.Component),G=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={binSize:5e5},e.optionsUpdate=function(t,a){var n=e.props.options,l=e.state.binSize;switch(t){case"left":n.left=a,n.left.bin_size=l;break;case"right":n.right=a,n.right.bin_size=l;break;case"general":default:l=a.binSize,n.general.title=a.title,n.general.tick_interval=a.rulerInterval,n.general.display_ruler=a.rulerDisplay.value,n.left.bin_size=l,n.right.bin_size=l,e.setState({binSize:l})}e.props.setOptions(n)},e}return Object(i.a)(a,[{key:"render",value:function(e,t){var a=this,n=this.props.genotypes;return l.a.createElement("fieldset",{className:"genotype-field"},l.a.createElement("legend",null,"Options "),l.a.createElement(M,{optionsUpdate:function(e,t){return a.optionsUpdate(e,t)}}),l.a.createElement(A,{side:"Left",genotypes:n,optionsUpdate:function(e,t){return a.optionsUpdate(e,t)}}),l.a.createElement(A,{side:"Right",genotypes:n,optionsUpdate:function(e,t){return a.optionsUpdate(e,t)}}))}}]),a}(l.a.Component),U=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"pure-g"},l.a.createElement("h6",null," About ")),l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-1 l-box modal-section"},l.a.createElement("p",null,"GCViT: a multiple chromosome visualisation tool for visualizing resequencing or SNP array data. GCViT permits comparison of multiple accessions to a reference accession within a single dataset, to visually identify regions of similarities and differences across the genome."),l.a.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/B2gPVUipWo0",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Introduction to GCViT"}))))}}]),a}(l.a.Component),H=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={hideInfo:!0},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.hideInfo;return l.a.createElement("div",null,l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-1 l-box fake-button",onClick:function(){e.setState({hideInfo:!t})}},l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," "),l.a.createElement("div",{className:"pure-u-5-6 l-box"}," Reference Genotype "),l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," ")))),l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"help-text pure-g",style:{maxHeight:t?"0px":"50%"}},l.a.createElement("div",{className:"pure-u-1-1 l-box modal-section"},l.a.createElement("p",null,l.a.createElement("ul",null,l.a.createElement("li",null,"Pick a Color that will represent the reference genotype. Please note that this color will only show up when \u201ctotal\u201d is selected in the display options."),l.a.createElement("li",null,"Pick a dataset to explore. Note that comparisons can only be done within a single dataset."),l.a.createElement("li",null,"Select which genotype will be the reference by either typing in the name of the genotype or using the pull down menu to see available genotypes. All comparison genotypes selected in the next step will be compared against this genotype.")),"*(note that large data sets may take a few seconds load, before the accession names to appear in the pull down menu.)")))))}}]),a}(l.a.Component),R=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={hideInfo:!0},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.hideInfo;return l.a.createElement("div",null,l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-1 l-box fake-button",onClick:function(){e.setState({hideInfo:!t})}},l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," "),l.a.createElement("div",{className:"pure-u-5-6 l-box"}," Comparison Genotype "),l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," ")))),l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"help-text pure-g",style:{maxHeight:t?"0px":"50%"}},l.a.createElement("div",{className:"pure-u-1-1 l-box modal-section"},l.a.createElement("p",null,"One or more comparison genotypes can be specified. Note that Comparisons can only be made within the same dataset."),l.a.createElement("p",null,l.a.createElement("ul",null,l.a.createElement("li",null,"Pick a Color that will represent the comparison genome. If comparing multiple genotypes it will be important to pick distinct colors for each."),l.a.createElement("li",null,"Select a comparison genotype by either typing in the name of the genotype or using the pull down menu to see available genotypes."),l.a.createElement("li",null,"Remove a comparison genotype by clicking on the",l.a.createElement("b",null,"X"),".")))))))}}]),a}(l.a.Component),z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={hideInfo:!0},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.hideInfo;return l.a.createElement("div",null,l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-1 l-box fake-button",onClick:function(){e.setState({hideInfo:!t})}},l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," "),l.a.createElement("div",{className:"pure-u-5-6 l-box"}," General Options "),l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," ")))),l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"help-text pure-g",style:{maxHeight:t?"0px":"50%"}},l.a.createElement("div",{className:"pure-u-1-1 l-box modal-section"},l.a.createElement("p",null,l.a.createElement("b",null,"Title")," ",l.a.createElement("i",null,"Default: blank")," Title shown on the display."),l.a.createElement("p",null,l.a.createElement("b",null,"Bin Size")," ",l.a.createElement("i",null,"Default: 500000bp")," Because the data on a whole genome display is highly condensed, it must be divided into bins, with the data within each bin averaged, counted, or otherwise combined into one value. Large genomes and/or very dense data sets suggest smaller bin sizes. However, setting the bin size too small will slow down rendering of the image to the point it may not display at all or it may become difficult or impossible to see differences in the data. For large genomes, it is recommended to not set the bin size much lower than 500000."),l.a.createElement("p",null,l.a.createElement("b",null,"Ruler Display")," ",l.a.createElement("i",null,"Default: left")," Where ruler is placed on the image."),l.a.createElement("p",null,l.a.createElement("b",null,"Ruler Interval")," ",l.a.createElement("i",null,"Default: 5000000")," Measured in bp, indicates how often to draw tic marks on the ruler. Each major tic mark will be labeled with a number and have one minor division between. Any value below 1000000 is likely to cause labels to overlap and be unreadable.")))))}}]),a}(l.a.Component),B=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={hideInfo:!0},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.hideInfo;return l.a.createElement("div",null,l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-1 l-box fake-button",onClick:function(){e.setState({hideInfo:!t})}},l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," "),l.a.createElement("div",{className:"pure-u-5-6 l-box"}," Display Type: None "),l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," ")))),l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"help-text pure-g",style:{maxHeight:t?"0px":"50%"}},l.a.createElement("div",{className:"pure-u-1-1 l-box modal-section"},l.a.createElement("p",null,"Don't render anything on this side of the chromosome backbone.")))))}}]),a}(l.a.Component),L=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={hideInfo:!0},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.hideInfo;return l.a.createElement("div",null,l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-1 l-box fake-button",onClick:function(){e.setState({hideInfo:!t})}},l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," "),l.a.createElement("div",{className:"pure-u-5-6 l-box"}," Display Type: Haplotype "),l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," ")))),l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"help-text pure-g",style:{maxHeight:t?"0px":"50%"}},l.a.createElement("div",{className:"pure-u-1-1 l-box modal-section"},l.a.createElement("p",null,"Shows SNPs as block regions that only display if the count in the bin meets the provided threshold."),l.a.createElement("p",null,"This Display is good for:",l.a.createElement("ul",null,l.a.createElement("li",null," Viewing inheritance when comparing a line with its parents."))),l.a.createElement("p",null," ",l.a.createElement("b",null,"Comparison")," ",l.a.createElement("i",null,"Default: different"),"  Which comparison with the reference to display.",l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("b",null,"Different"),": Positions where reference and comparison line have different alleles."),l.a.createElement("li",null,l.a.createElement("b",null,"Same"),": Positions where reference and comparison line have the same alleles."),l.a.createElement("li",null,l.a.createElement("b",null,"Total"),": Total number of SNPs for reference and comparison, alongside a count for locations where the allele was undefined."))),l.a.createElement("p",null," ",l.a.createElement("b",null,"Filter Genotypes")," ",l.a.createElement("i",null,"Default: all [blank]")," Allows the restriction of the displayed genotypes when more-than-one is available, due to either more-than-one comparison, or using the total comparison. If not empty, only the selected genotypes will display.  This option is useful if the user would like to see the differences between the reference and each comparison on opposite sides of the chromosome."),l.a.createElement("p",null," ",l.a.createElement("b",null,"Threshold")," ",l.a.createElement("i",null,"Default: 1")," The glyph is only drawn if the count matches or exceeds this number.")))))}}]),a}(l.a.Component),q=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={hideInfo:!0},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.hideInfo;return l.a.createElement("div",null,l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-1 l-box fake-button",onClick:function(){e.setState({hideInfo:!t})}},l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," "),l.a.createElement("div",{className:"pure-u-5-6 l-box"}," Display Type: Histogram "),l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," ")))),l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"help-text pure-g",style:{maxHeight:t?"0px":"50%"}},l.a.createElement("div",{className:"pure-u-1-1 l-box modal-section"},l.a.createElement("p",null,"Shows SNPs as block regions with a height that is proportional to the count in the bin and the provided min and max values. Similar to the heat map option, but uses volume instead of color to indicate bin density."),l.a.createElement("p",null," ",l.a.createElement("b",null,"Comparison")," ",l.a.createElement("i",null,"Default: different"),"  Which comparison with the reference to display.",l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("b",null,"Different"),": Positions where reference and comparison line have different alleles."),l.a.createElement("li",null,l.a.createElement("b",null,"Same"),": Positions where reference and comparison line have the same alleles."),l.a.createElement("li",null,l.a.createElement("b",null,"Total"),": Total number of SNPs for reference and comparison, alongside a count for locations where the allele was undefined."))),l.a.createElement("p",null,l.a.createElement("b",null,"Filter Genotypes")," ",l.a.createElement("i",null,"Default: all [blank]")," Select one or more genotypes or leave blank for all comparison genotypes."),l.a.createElement("p",null,l.a.createElement("b",null,"Min Value")," ",l.a.createElement("i",null,"Default: 0")," Cutoff value for displaying any height on the glyph. Any count equal to or smaller than this number will not be displayed."),l.a.createElement("p",null,l.a.createElement("b",null,"Max Value")," ",l.a.createElement("i",null,"Default: 0")," Cutoff value for displaying maximum height on the glyph. Any count equal to or larger than this number will be displayed as the full height. Here, 0 is shorthand for the largest count in the reference across all bins.")))))}}]),a}(l.a.Component),F=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={hideInfo:!0},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.hideInfo;return l.a.createElement("div",null,l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-1 l-box fake-button",onClick:function(){e.setState({hideInfo:!t})}},l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," "),l.a.createElement("div",{className:"pure-u-5-6 l-box"}," Display Type: Heatmap "),l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down rotate":"arrow-down"})," ")))),l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"help-text pure-g",style:{maxHeight:t?"0px":"50%"}},l.a.createElement("div",{className:"pure-u-1-1 l-box modal-section"},l.a.createElement("p",null,"Shows SNPs as block regions with a color that is proportional to the count in the bin and the provided min and max values. Similar to the heat map option, but color instead of volume to indicate bin density."),l.a.createElement("p",null," ",l.a.createElement("b",null,"Comparison")," ",l.a.createElement("i",null,"Default: different"),"  Which comparison with the reference to display.",l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("b",null,"Different"),": Positions where reference and comparison line have different alleles."),l.a.createElement("li",null,l.a.createElement("b",null,"Same"),": Positions where reference and comparison line have the same alleles."),l.a.createElement("li",null,l.a.createElement("b",null,"Total"),": Total number of SNPs for reference and comparison, alongside a count for locations where the allele was undefined."))),l.a.createElement("p",null,l.a.createElement("b",null,"Filter Genotypes")," ",l.a.createElement("i",null,"Default: all [blank]")," Select one or more genotypes or leave blank for all comparison genotypes."),l.a.createElement("p",null,l.a.createElement("b",null,"Min Value")," ",l.a.createElement("i",null,"Default: 0")," Cutoff value for displaying any height on the glyph. Any count equal to or smaller than this number will not be displayed."),l.a.createElement("p",null,l.a.createElement("b",null,"Max Value")," ",l.a.createElement("i",null,"Default: 0")," Cutoff value for displaying maximum height on the glyph. Any count equal to or larger than this number will be displayed as the full height. Here, 0 is shorthand for the largest count in the reference across all bins."),l.a.createElement("p",null,l.a.createElement("b",null,"Heat Base Color")," ",l.a.createElement("i",null,"Default: white")," Choose to go from white -> color or black -> color"),l.a.createElement("p",null,l.a.createElement("b",null,"Heat Direction")," ",l.a.createElement("i",null,"Default: Min-Max")," Render heat low-to-high as  base -> color (Min-Max) or color -> base (Max-Min)")))))}}]),a}(l.a.Component),W=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"modal-area selector-container"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("h5",null," GCViT - Genotype Comparison Visualisation Tool "),l.a.createElement("hr",null),l.a.createElement("div",{className:"modal-contents"},l.a.createElement(U,null),l.a.createElement("h6",null," Genotypes "),l.a.createElement(H,null),l.a.createElement(R,null),l.a.createElement("h6",null," Options "),l.a.createElement(z,null),l.a.createElement(B,null),l.a.createElement(q,null),l.a.createElement(F,null),l.a.createElement(L,null))),l.a.createElement("div",{className:"modal-close"},l.a.createElement("button",{className:"pure-button  button-display modal-confirm",onClick:function(){return e.props.closeAction()}}," Close ")))}}]),a}(l.a.Component),K=a(79),J=a.n(K),X=a(120),Q=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={name:y,format:"svg",quality:.95,gffOptions:{chromosome:!0,diff:!0,same:!0,total:!0}},e.onClickImage=Object(X.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.getElementById("img-load").classList.toggle("download-loading"),"svg"!==this.state.format){e.next=8;break}return e.next=5,this.resolveSVGBlob();case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=this.resolvePngBlob();case 9:t=e.t0,this.saveImage(t);case 11:case"end":return e.stop()}}),e,this)}))),e.resolveSVGBlob=function(){return new Promise((function(e){setTimeout((function(){var t=window.cvit.model.paper,a="data:image/svg+xml;utf8,"+encodeURIComponent(t.project.exportSVG({asString:!0}));e(a)}),500)}))},e.resolvePngBlob=function(){return new Promise((function(t){setTimeout((function(){window.cvit.model.paper.project.view.element.toBlob((function(a){var n=URL.createObjectURL(a);e.saveImage(n),t(n)}))}),20)}))},e.saveImage=function(t){var a=""!==e.state.name?e.state.name:"gcvit";a+=".".concat(e.state.format);var n=document.createElement("a");n.download=a,n.href=t,document.body.appendChild(n),document.getElementById("img-load").classList.toggle("download-loading"),n.click()},e.onClickData=function(){var t="##gff-version 3.2.1",a=window.cvit.model.data,n=e.state.gffOptions,l=document.getElementById("data-load");for(var r in l.classList.toggle("download-loading"),a)if(a.hasOwnProperty(r)&&n[r]){var o=a[r];o.hasOwnProperty("features")&&o.features.forEach((function(e){var a="".concat(e.seqName,"\t").concat(e.source,"\t").concat(e.feature,"\t").concat(e.start,"\t").concat(e.end,"\t").concat(e.score,"\t").concat(e.strand,"\t").concat(e.frame),n="";for(var l in e.attribute)e.attribute.hasOwnProperty(l)&&(n+="".concat(l,"=").concat(e.attribute[l],";"));t+="\n".concat(a,"\t").concat(n)}))}var s="data:text/plain;utf8,"+encodeURIComponent(t);l.classList.toggle("download-loading");var i=window.open();i.document.write('<iframe src="'+s+'" frameborder="0" style="border:0; top:0; left:0; bottom:0; right:0; width:100%; height:100%;" allowfullscreen></iframe>'),i.download("gcvit.gff")},e.onInput=function(t){e.setState({name:t.target.value})},e.onSelect=function(t){e.setState({format:t.target.value})},e.onChecked=function(t){var a=e.state.gffOptions;a[t.target.value]=!a[t.target.value],e.setState({gffOptions:a})},e}return Object(i.a)(a,[{key:"render",value:function(e,t){var a=this,n=this.state,r=n.name,o=n.format,s=n.gffOptions;return l.a.createElement("div",{className:"modal-area"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("h5",null," Downloads "),l.a.createElement("hr",null),l.a.createElement("div",{className:"modal-contents"},l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-1 l-box cvit cvit-modal",id:"export-img-modal"},l.a.createElement("h5",null," Download Image "),l.a.createElement("p",null," Download the current view as an image."),l.a.createElement("form",{style:{width:"100%"}},l.a.createElement("h6",null," Image Settings: "),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("span",null,"File Name: ")),l.a.createElement("td",null,l.a.createElement("input",{type:"text",value:r,onInput:function(e){return a.onInput(e)},placeholder:"cvit"}))),l.a.createElement("tr",null,l.a.createElement("td",null," ",l.a.createElement("span",null," File Type: ")," "),l.a.createElement("td",null,l.a.createElement("label",null,l.a.createElement("input",{id:"opt-svg",type:"radio",value:"svg",onChange:function(e){return a.onSelect(e)},checked:"svg"===o}),l.a.createElement("span",null," svg "))),l.a.createElement("td",null,l.a.createElement("label",null,l.a.createElement("input",{id:"opt-png",type:"radio",value:"png",onChange:function(e){return a.onSelect(e)},checked:"png"===o}),l.a.createElement("span",null," png ")))))),l.a.createElement("div",{id:"img-load",className:"gcvit-load-text"}," Generating Image: Please Wait "),l.a.createElement("button",{className:"pure-button button-display modal-confirm",onClick:function(){return a.onClickImage()}}," Export Image "))),l.a.createElement("div",{className:"pure-g"},l.a.createElement("hr",null),l.a.createElement("div",{className:"pure-u-1-1 l-box cvit cvit-modal",id:"export-data-modal"},l.a.createElement("h5",null," Download Data "),l.a.createElement("p",null," Download data as a gff "),l.a.createElement("form",{style:{width:"100%"}},l.a.createElement("h6",null," GFF Settings: "),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null," ",l.a.createElement("span",null," Include: ")," "),l.a.createElement("td",null,l.a.createElement("label",null,l.a.createElement("input",{id:"opt-chr",type:"checkbox",value:"chromosome",onChange:function(e){return a.onChecked(e)},checked:s.chromosome}),l.a.createElement("span",null," chromosome "))),l.a.createElement("td",null,l.a.createElement("label",null,l.a.createElement("input",{id:"opt-diff",type:"checkbox",value:"diff",onChange:function(e){return a.onChecked(e)},checked:s.diff}),l.a.createElement("span",null," different ")))),l.a.createElement("tr",null,l.a.createElement("td",null,"  "),l.a.createElement("td",null,l.a.createElement("label",null,l.a.createElement("input",{id:"opt-same",type:"checkbox",value:"same",onChange:function(e){return a.onChecked(e)},checked:s.same}),l.a.createElement("span",null," same "))),l.a.createElement("td",null,l.a.createElement("label",null,l.a.createElement("input",{id:"opt-total",type:"checkbox",value:"total",onChange:function(e){return a.onChecked(e)},checked:s.total}),l.a.createElement("span",null," total ")))))),l.a.createElement("div",{id:"data-load",className:"gcvit-load-text"}," Generating Gff: Please Wait "),l.a.createElement("button",{className:"pure-button button-display modal-confirm",onClick:function(){return a.onClickData()}}," Download Data "))))),l.a.createElement("div",{className:"modal-close"},l.a.createElement("button",{className:"pure-button  button-display modal-confirm",onClick:function(){return a.props.closeAction()}}," Close ")))}}]),a}(l.a.Component),Y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={priorRequest:{request:"",interval:5e5,response:{},refMax:0}},e.onSubmit=function(){e.props.setKey();var t=e.props,a=t.selected,n=t.options,l=e.state.priorRequest,r=e.props.headers,o="",s={},i=0;a.forEach((function(e,t){if(null!==e&&e.hasOwnProperty("dataset")&&e.hasOwnProperty("genotype")&&null!=e.dataset&&null!=e.genotype)i++,o=0===t?o+"Ref=":o+"&Variant=",o+=encodeURIComponent("".concat(e.dataset.value,":").concat(e.genotype.value)),s[e.genotype.value]=e.color;else if(0===t)throw new Error("Reference must be selected.")})),s[void 0]="black";var c=window.cvit.model;c._viewConfig.classes=s;var u=n.left.hasOwnProperty("bin_size")?n.left.bin_size:n.right.hasOwnProperty("bin_size")?n.right.bin_size:5e5;o=o+"&Bin="+encodeURIComponent(u),e.props.hide(),l.request!==o||u!==l.interval?(document.getElementById("cvit-app").style.visibility="visible",e.setState({hideOptions:!0}),c._viewData.same={},c._viewData.diff={},c._viewData.total={},r.append("Content-Type","application/x-www-form-urlencoded"),console.log("auth-header",r),c.appendData("api/generateGFF",{method:"POST",headers:r,body:o}).then((function(){c._viewLayout.chrOrder=c._setChrOrder(c._viewData);var t=0,a=c._viewData;Object.keys(a.total).forEach((function(e){var n=a.total[e];n.hasOwnProperty("maxScore")&&n.maxScore.value>t&&(t=n.maxScore.value)})),e.setState({priorRequest:{response:c._viewData,request:o,interval:u,refMax:t}}),e.setView(n,c,i,t)})).catch((function(e){console.error("cvit.js: Error requesting data: ",e)}))):e.setView(n,c,i,l.refMax)},e.setView=function(e,t,a,n){0===e.left.bin_max&&(e.left.bin_max="heat"===e.left.display?n:n*a),0===e.right.bin_max&&(e.right.bin_max="heat"===e.right.display?n:n*a),t._viewConfig.left.class_heat=[],t._viewConfig.right.class_heat=[],t._viewConfig.left.class_filter=[],t._viewConfig.right.class_filter=[],t._viewConfig=t._combineObjects(t._viewConfig,e),t._redraw=!0,t.setDirty(!0),t._inform()},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("button",{className:"pure-u-1-4 pure-button-primary button-action pure-button",onClick:this.onSubmit}," Display ")}}]),a}(l.a.Component),Z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={visible:!0},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.visible,a=this.props.datasets;console.log(a);var n=a.map((function(e,t){var a=[];return e.genotype&&e.color&&(0===t?a.push(l.a.createElement("div",{className:"pure-u-1-4 l-box",style:{fontWeight:"bold"}}," Reference ")):1===t&&a.push(l.a.createElement("div",{className:"pure-u-1-4 l-box",style:{fontWeigth:"bold"}}," Variants ")),a.push(l.a.createElement("div",{className:"pure-u-1-4 l-box"}," ",l.a.createElement("div",{className:"key-color",style:{background:e.color}},"    ")," ",e.genotype.label," ")),0===t&&a.push(l.a.createElement("div",{className:"pure-u-1-2 l-box"}," "))),a}));return l.a.createElement("div",null,l.a.createElement("div",{className:"pure-u-1-1 l-box fake-button"},l.a.createElement("div",{className:"pure-g l-box",onClick:function(){e.setState({visible:!t})}},l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down":"arrow-down rotate"})," "),l.a.createElement("div",{className:"pure-u-5-6 l-box"}," Key "),l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:t?"arrow-down":"arrow-down rotate"})," "))),l.a.createElement("div",{className:"key-box",style:{display:t?"block":"none"}},l.a.createElement("div",{className:"pure-g l-box"},n)))}}]),a}(l.a.Component),$=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={datasets:[],genotypes:{},referenceDataset:null,selected:[],currentKey:[],options:{left:{feature:"none",offset:-0,draw_label:0},right:{feature:"none",offset:0,draw_label:0},general:{title:"",display_ruler:"L",tick_interval:5e6}},hideOptions:!1,showModal:"",auth:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_USE_AUTH,user:"",pwd:"",authHeader:new Headers},e.loadDatasets=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.authHeader;fetch("api/experiment",{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(t){e.setState({datasets:t})}))},e.appendDataset=function(t,a){var n=e.state.selected.slice();n[t]=a,e.setState({selected:n})},e.setDataset=function(t){var a=t.value;e.state.genotypes[a]?e.setState({referenceDataset:t,selected:[]}):fetch("api/experiment/".concat(a),{method:"GET",headers:e.state.authHeader}).then((function(e){return e.json()})).then((function(n){var l=JSON.parse(JSON.stringify(e.state.genotypes));l[a]=n,e.setState({referenceDataset:t,genotypes:l,selected:[]})}))},e.setOptions=function(t){e.setState(t)},e.handleCloseModal=function(){return e.setState({showModal:""})},e.handleOpenModal=function(t){return e.setState({showModal:t})},e.userChange=function(t){var a=t.target.value;e.setState({user:a})},e.passwordChange=function(t){var a=t.target.value;e.setState({pwd:a})},e.checkAuthState=function(){var t=btoa(e.state.user+":"+e.state.pwd),a=new Headers;a.append("Authorization","Basic "+t),fetch("/login",{method:"GET",headers:a}).then((function(t){202===t.status?(e.setState({authHeader:a}),e.loadDatasets()):window.alert("Invalid credentials.")}))},e.logout=function(){var t=new Headers;e.setState({authHeader:t,user:"",pwd:"",datasets:[]}),e.loadDatasets(t)},e.setKey=function(){e.setState({currentKey:JSON.parse(JSON.stringify(e.state.selected))})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("cvit-app").style.visibility="hidden",this.loadDatasets()}},{key:"render",value:function(){var e=this,t=this.state,a=t.selected,n=t.currentKey,r=t.options,o=t.hideOptions,s=t.showModal,i=t.auth,c=t.user,u=t.authHeader,m=null!==this.state.referenceDataset&&void 0!==this.state.genotypes[this.state.referenceDataset.value]?this.state.genotypes[this.state.referenceDataset.value]:[];return l.a.createElement("div",{className:"selector-container"},l.a.createElement(p.a,{isOpen:"data"===s,onRequestClose:this.handleCloseModal,shouldCloseOnOverlayClick:!0},l.a.createElement(Q,{closeAction:function(){return e.handleOpenModal()}})),l.a.createElement(p.a,{isOpen:"help"===s,onRequestClose:this.handleCloseModal,shouldCloseOnOverlayClick:!0},l.a.createElement(W,{closeAction:function(){return e.handleOpenModal()}})),l.a.createElement("div",{className:"pure-u-1-1 l-box fake-button",onClick:function(){e.setState({hideOptions:!o})}},l.a.createElement("div",{className:"pure-g"},l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:o?"arrow-down rotate":"arrow-down"})," "),l.a.createElement("div",{className:"pure-u-5-6 l-box"}," Configure View "),l.a.createElement("div",{className:"pure-u-1-12 l-box"}," ",l.a.createElement("div",{className:o?"arrow-down rotate":"arrow-down"})," "))),l.a.createElement("form",{className:"display-options",style:{maxHeight:o?"0px":"100%",overflow:o?"hidden":"visible"}},"TRUE"===i?u.has("Authorization")?l.a.createElement("fieldset",{className:"genotype-field"},l.a.createElement("legend",null," Login "),l.a.createElement("div",{className:"pure-g genotype-select"},l.a.createElement("div",{className:"pure-u-10-12 l-box "},l.a.createElement("div",{className:"pure-u-1-1 l-box",style:{width:"100%"}}," ","Logged in as ".concat(c)," ")),l.a.createElement("div",{className:"pure-u-2-12 l-box"},l.a.createElement("div",{className:"fake-button git-option",onClick:function(){return e.logout()}}," Logout ")))):l.a.createElement("fieldset",{className:"genotype-field"},l.a.createElement("legend",null," Login "),l.a.createElement("div",{className:"pure-g genotype-select"},l.a.createElement("div",{className:"pure-u-5-12 l-box "},l.a.createElement("input",{type:"text",className:"pure-u-1-1 l-box git-option",placeholder:"username",onInput:function(t){return e.userChange(t)}})),l.a.createElement("div",{className:"pure-u-5-12 l-box"},l.a.createElement("input",{type:"password",className:"pure-u-1-1 l-box git-option",placeholder:"password",onInput:function(t){return e.passwordChange(t)}})),l.a.createElement("div",{className:"pure-u-2-12 l-box"},l.a.createElement("div",{className:"fake-button git-option",onClick:function(){return e.checkAuthState()}}," Login ")))):null,l.a.createElement(O,{datasets:this.state.datasets,setDataset:this.setDataset,appendDataset:this.appendDataset,genotypes:m}),a.length>0&&null!==a[0].genotype?l.a.createElement(k,{selected:this.state.referenceDataset,genotypes:m,appendDataset:this.appendDataset}):null,l.a.createElement(G,{setOptions:this.setOptions,genotypes:a,options:r})),l.a.createElement("div",{className:"pure-g"},l.a.createElement(Y,{selected:a,options:r,headers:u,hide:function(){e.setState({hideOptions:!0})},setKey:this.setKey}),l.a.createElement("div",{className:"pure-u-5-24 "},l.a.createElement("br",null)),l.a.createElement("button",{className:"pure-u-1-4  pure-button button-display",onClick:function(){return e.handleOpenModal("data")}}," Download "),l.a.createElement("div",{className:"pure-u-1-24"}),l.a.createElement("button",{className:"pure-u-1-4  pure-button button-display",onClick:function(){return e.handleOpenModal("help")}}," Help ")),l.a.createElement(Z,{datasets:n}))}}]),a}(l.a.Component);o.a.render(l.a.createElement($,null),document.getElementById("selector-app"))}},[[121,1,2]]]);
//# sourceMappingURL=main.84bf8389.chunk.js.map